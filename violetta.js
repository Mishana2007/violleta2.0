const TelegramBot = require('node-telegram-bot-api');
const sqlite3 = require('sqlite3').verbose();
const OpenAI = require('openai');
const ExcelJS = require('exceljs');
const fs = require('fs');
const schedule = require('node-schedule'); 
require('dotenv').config();

// –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
const token = process.env.TELEGRAM_BOT_TOKEN;
const admins = [1301142907, 225496853, 246813579];
const bot = new TelegramBot(token, { polling: true });
const openai = new OpenAI({
    apiKey: process.env.API
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
const db = new sqlite3.Database('./survey.db', (err) => {
    if (err) {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:', err.message);
    } else {
        // console.log('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite —É—Å–ø–µ—à–Ω–æ.');
        initializeDatabase();
    }
});

function initializeDatabase() {
    const createTableQuery = `
        CREATE TABLE IF NOT EXISTS responses (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            chat_id INTEGER UNIQUE,
            username TEXT,
            full_name TEXT,
            age INTEGER,
            gender TEXT,
            taking_meds TEXT,
            meds_details TEXT,
            pregnant TEXT,
            stage TEXT,
            current_test TEXT,
            test1_answers TEXT,
            test2_answers TEXT,
            test3_answers TEXT,
            test4_answers TEXT,
            recommendation TEXT,
            message_id INTEGER
        )
    `;

    db.run(createTableQuery, (err) => {
        if (err) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã:', err);
        } else {
            // console.log('–¢–∞–±–ª–∏—Ü–∞ responses —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.');
            // –ü—Ä–æ–≤–µ—Ä–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
            db.all("PRAGMA table_info(responses);", [], (err, rows) => {
                if (err) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã:', err);
                } else {
                    // console.log('–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:', rows);
                }
            });
        }
    });
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
const tests = {
    test1: {
        title: '–¢–µ—Å—Ç –Ω–∞ –∞–∫—Ü–µ–Ω—Ç—É–∞—Ü–∏–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞',
        type: 'binary',
        questions: [
            '–°–¥–µ–ª–∞–≤ —á—Ç–æ-–ª–∏–±–æ, –í—ã —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å, –≤—Å–µ –ª–∏ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ –Ω–µ —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç–µ—Å—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ —É–±–µ–¥–∏—Ç–µ—Å—å –µ—â–µ —Ä–∞–∑ –≤ —ç—Ç–æ–º.',
            '–í –¥–µ—Ç—Å—Ç–≤–µ –≤—ã –±—ã–ª–∏ —Ç–∞–∫–∏–º –∂–µ —Å–º–µ–ª—ã–º, –∫–∞–∫ –¥—Ä—É–≥–∏–µ –í–∞—à–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–∏.',
            '–ß–∞—Å—Ç–æ –ª–∏ —É –í–∞—Å —Ä–µ–∑–∫–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –ª–∏–∫–æ–≤–∞–Ω–∏—è –¥–æ –æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫ –∂–∏–∑–Ω–∏, –∫ —Å–µ–±–µ?',
            '–Ø–≤–ª—è–µ—Ç–µ—Å—å –ª–∏ –≤—ã –æ–±—ã—á–Ω–æ —Ü–µ–Ω—Ç—Ä–æ–º –≤–Ω–∏–º–∞–Ω–∏—è –≤ –æ–±—â–µ—Å—Ç–≤–µ, –≤ –∫–æ–º–ø–∞–Ω–∏–∏?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –≤—ã –±–µ—Å–ø—Ä–∏—á–∏–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ —Ç–∞–∫–æ–º –≤–æ—Ä—á–ª–∏–≤–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, —á—Ç–æ —Å –í–∞–º–∏ –ª—É—á—à–µ –Ω–µ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å?',
            '–í—ã —Å–µ—Ä—å–µ–∑–Ω—ã–π —á–µ–ª–æ–≤–µ–∫.',
            '–°–ø–æ—Å–æ–±–Ω—ã –ª–∏ –≤—ã –≤–æ—Å—Ö–∏—â–∞—Ç—å—Å—è, –≤–æ—Å—Ç–æ—Ä–≥–∞—Ç—å—Å—è —á–µ–º-–Ω–∏–±—É–¥—å?',
            '–ü—Ä–µ–¥–ø—Ä–∏–∏–º—á–∏–≤—ã –ª–∏ –í—ã?',
            '–í—ã –±—ã—Å—Ç—Ä–æ –∑–∞–±—ã–≤–∞–µ—Ç–µ, –µ—Å–ª–∏ –í–∞—Å –∫—Ç–æ-—Ç–æ –æ–±–∏–¥–∏—Ç.',
            '–ú—è–≥–∫–æ—Å–µ—Ä–¥–µ—á–Ω—ã –ª–∏ –í—ã?',
            '–û–ø—É—Å–∫–∞—è –ø–∏—Å—å–º–æ –≤ —è—â–∏–∫, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –ª–∏ –í—ã, –ø—Ä–æ–≤–æ–¥—è —Ä—É–∫–æ–π –ø–æ —â–µ–ª–∏ —è—â–∏–∫–∞, —á—Ç–æ –ø–∏—Å—å–º–æ —É–ø–∞–ª–æ –≤ –Ω–µ–≥–æ?',
            '–°—Ç—Ä–µ–º–∏—Ç–µ—Å—å –ª–∏ –≤—ã –≤—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—Ç—å—Å—è –≤ —á–∏—Å–ª–µ –ª—É—á—à–∏—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤?',
            '–ë—ã–≤–∞–ª–æ –ª–∏ –í–∞–º –≤ –¥–µ—Ç—Å—Ç–≤–µ —Å—Ç—Ä–∞—à–Ω–æ –≤–æ –≤—Ä–µ–º—è –≥—Ä–æ–∑—ã –∏–ª–∏ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ —Å –Ω–µ–∑–Ω–∞–∫–æ–º–æ–π —Å–æ–±–∞–∫–æ–π (–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å, —Ç–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ –±—ã–≤–∞–µ—Ç –∏ —Ç–µ–ø–µ—Ä—å)?',
            '–í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –≤–æ –≤—Å–µ–º –∏ –ø–æ–≤—Å—é–¥—É —Å–æ–±–ª—é–¥–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫.',
            '–í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤.',
            '–õ—é–±—è—Ç –ª–∏ –≤–∞—Å –≤–∞—à–∏ –∑–Ω–∞–∫–æ–º—ã–µ?',
            '–ß–∞—Å—Ç–æ –ª–∏ —É –í–∞—Å –±—ã–≤–∞–µ—Ç —á—É–≤—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞, –æ—â—É—â–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ–π –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç–∏, –±–µ–¥—ã?',
            '–£ –≤–∞—Å —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.',
            '–ü–µ—Ä–µ–∂–∏–≤–∞–ª–∏ –ª–∏ –í—ã —Ö–æ—Ç—è –±—ã —Ä–∞–∑ –∏—Å—Ç–µ—Ä–∏–∫—É –∏–ª–∏ –Ω–µ—Ä–≤–Ω—ã–π —Å—Ä—ã–≤?',
            '–¢—Ä—É–¥–Ω–æ –ª–∏ –≤–∞–º –¥–æ–ª–≥–æ —É—Å–∏–¥–µ—Ç—å –Ω–∞ –º–µ—Å—Ç–µ?',
            '–ï—Å–ª–∏ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –í–∞–º –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –ø–æ—Å—Ç—É–ø–∏–ª–∏, –í—ã –æ–±—ã—á–Ω–æ —Å—á–∏—Ç–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–º —ç–Ω–µ—Ä–≥–∏—á–Ω–æ –æ—Ç—Å—Ç–∞–∏–≤–∞—Ç—å —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã.',
            '–ú–æ–∂–µ—Ç–µ –ª–∏ –í—ã –∑–∞—Ä–µ–∑–∞—Ç—å –∫—É—Ä–∏—Ü—É –∏–ª–∏ –æ–≤—Ü—É?',
            '–í–∞—Å —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, –µ—Å–ª–∏ –¥–æ–º–∞ –∑–∞–Ω–∞–≤–µ—Å –∏–ª–∏ —Å–∫–∞—Ç–µ—Ä—Ç—å –≤–∏—Å—è—Ç –Ω–µ—Ä–æ–≤–Ω–æ, –∏ –≤—ã —Å—Ä–∞–∑—É –∂–µ —Å—Ç–∞—Ä–∞–µ—Ç–µ—Å—å –ø–æ–ø—Ä–∞–≤–∏—Ç—å –∏—Ö.',
            '–í—ã –≤ –¥–µ—Ç—Å—Ç–≤–µ –±–æ—è–ª–∏—Å—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ –¥–æ–º–∞.',
            '–ß–∞—Å—Ç–æ –ª–∏ —É –≤–∞—Å –±—ã–≤–∞—é—Ç –±–µ—Å–ø—Ä–∏—á–∏–Ω–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è ?',
            '–í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –±—ã—Ç—å –≤—ã—Å–æ–∫–æ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–º –≤ —Å–≤–æ–µ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏.',
            '–ë—ã—Å—Ç—Ä–æ –ª–∏ –í—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å–µ—Ä–¥–∏—Ç—å—Å—è –∏–ª–∏ –≤–ø–∞–¥–∞—Ç—å –≤ –≥–Ω–µ–≤?',
            '–ú–æ–∂–µ—Ç–µ –ª–∏ –í—ã –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ–∑–∑–∞–±–æ—Ç–Ω—ã–º?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –æ—â—É—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å—á–∞—Å—Ç—å—è –±—É–∫–≤–∞–ª—å–Ω–æ –ø—Ä–æ–Ω–∏–∑—ã–≤–∞–µ—Ç –í–∞—Å?',
            '–ö–∞–∫ –í—ã –¥—É–º–∞–µ—Ç–µ, –ø–æ–ª—É—á–∏–ª—Å—è –±—ã –∏–∑ –í–∞—Å –≤–µ–¥—É—â–∏–π –≤ —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ü–µ—Ä—Ç–µ?',
            '–í—ã –æ–±—ã—á–Ω–æ –≤—ã—Å–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–æ, –ø—Ä—è–º–æ –∏ –Ω–µ–¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ.',
            '–í–∞–º —Ç—Ä—É–¥–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –≤–∏–¥ –∫—Ä–æ–≤–∏, –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç —É –í–∞—Å –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è.',
            '–ù—Ä–∞–≤–∏—Ç—Å—è –ª–∏ –í–∞–º —Ä–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–æ–π –ª–∏—á–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é?',
            '–í—ã —Å–∫–ª–æ–Ω–Ω—ã –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ –∑–∞—â–∏—Ç—É –ª–∏—Ü, –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –∫–æ—Ç–æ—Ä—ã–º –¥–æ–ø—É—â–µ–Ω–∞ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å.',
            '–ë—ã–ª–æ –±—ã –í–∞–º —Å—Ç—Ä–∞—à–Ω–æ —Å–ø—É—Å–∫–∞—Ç—å—Å—è –≤ —Ç–µ–º–Ω—ã–π –ø–æ–¥–≤–∞–ª?',
            '–í—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —Ä–∞–±–æ—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä–æ, –Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞—á–µ—Å—Ç–≤—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ–≤—ã—Å–æ–∫–∏.',
            '–û–±—â–∏—Ç–µ–ª—å–Ω—ã –ª–∏ –í—ã?',
            '–í —à–∫–æ–ª–µ –≤—ã –æ—Ö–æ—Ç–Ω–æ –¥–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç–∏—Ö–∏.',
            '–£–±–µ–≥–∞–ª–∏ –ª–∏ –í—ã –≤ –¥–µ—Ç—Å—Ç–≤–µ –∏–∑ –¥–æ–º–∞?',
            '–ö–∞–∂–µ—Ç—Å—è –ª–∏ –í–∞–º –∂–∏–∑–Ω—å —Ç—Ä—É–¥–Ω–æ–π?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –ø–æ—Å–ª–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞, –æ–±–∏–¥—ã –í—ã –±—ã–ª–∏ –¥–æ —Ç–æ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω—ã, —á—Ç–æ –∏–¥—Ç–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –∫–∞–∑–∞–ª–æ—Å—å –ø—Ä–æ—Å—Ç–æ –Ω–µ–≤—ã–Ω–æ—Å–∏–º—ã–º?',
            '–ú–æ–∂–Ω–æ –ª–∏ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ –í—ã –Ω–µ —Ç–µ—Ä—è–µ—Ç–µ —á—É–≤—Å—Ç–≤–∞ —é–º–æ—Ä–∞?',
            '–ï—Å–ª–∏ –±—ã –í–∞—Å –∫—Ç–æ-–ª–∏–±–æ –æ–±–∏–¥–µ–ª, –ø—Ä–µ–¥–ø—Ä–∏–Ω—è–ª–∏ –±—ã –í—ã –ø–µ—Ä–≤—ã–º —à–∞–≥–∏ –∫ –ø—Ä–∏–º–∏—Ä–µ–Ω–∏—é?',
            '–í—ã –æ—á–µ–Ω—å –ª—é–±–∏—Ç–µ –∂–∏–≤–æ—Ç–Ω—ã—Ö.',
            '–í—ã –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ—Å—å, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—Å—Ç–∞–≤–∏–ª–∏ –¥–æ–º –∏–ª–∏ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ –≤ –ø–æ—Ä—è–¥–∫–µ, –∏ —Ç–∞–º –Ω–∏—á–µ–≥–æ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–æ–≥–æ –Ω–µ —Å–ª—É—á–∏–ª–æ—Å—å.',
            '–í–∞—Å –∏–Ω–æ–≥–¥–∞ –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç –Ω–µ—è—Å–Ω–∞—è –º—ã—Å–ª—å, —á—Ç–æ —Å –í–∞–º–∏ –∏–ª–∏ –í–∞—à–∏–º–∏ –±–ª–∏–∑–∫–∏–º–∏ –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞—à–Ω–æ–µ.',
            '–°—á–∏—Ç–∞–µ—Ç–µ –ª–∏ –í—ã, —á—Ç–æ –í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—á–µ–Ω—å –∏–∑–º–µ–Ω—á–∏–≤–æ?',
            '–¢—Ä—É–¥–Ω–æ –ª–∏ –í–∞–º –≤—ã—Å—Ç—É–ø–∞—Ç—å –ø–µ—Ä–µ–¥ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª—é–¥–µ–π?',
            '–í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞—Ä–∏—Ç—å –æ–±–∏–¥—á–∏–∫–∞, –µ—Å–ª–∏ –æ–Ω –í–∞—Å –æ—Å–∫–æ—Ä–±–∏—Ç.',
            '–£ –í–∞—Å –æ—á–µ–Ω—å –≤–µ–ª–∏–∫–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏.',
            '–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ —Ç–µ–º, –∫—Ç–æ –ø—Ä–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏—è—Ö –≤–ø–∞–¥–∞–µ—Ç –≤ –≥–ª—É–±–æ–∫–æ–µ –æ—Ç—á–∞—è–Ω–∏–µ.',
            '–í–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞, —Ç—Ä–µ–±—É—é—â–∞—è —ç–Ω–µ—Ä–≥–∏—á–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.',
            '–£ –í–∞—Å —Ö–≤–∞—Ç–∞–µ—Ç –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –¥–æ–±–∏–≤–∞—Ç—å—Å—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Ü–µ–ª–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –Ω–∞ –ø—É—Ç–∏ –∫ –Ω–µ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–µ–æ–¥–æ–ª–µ–≤–∞—Ç—å –º–Ω–æ–≥–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π.',
            '–¢—Ä–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å–º –º–æ–∂–µ—Ç –≤–∑–≤–æ–ª–Ω–æ–≤–∞—Ç—å –í–∞—Å —Ç–∞–∫, —á—Ç–æ –Ω–∞ –≥–ª–∞–∑–∞—Ö –≤—ã—Å—Ç—É–ø–∞—é—Ç —Å–ª–µ–∑—ã.',
            '–ß–∞—Å—Ç–æ –ª–∏ –≤–∞–º –±—ã–≤–∞–µ—Ç —Ç—Ä—É–¥–Ω–æ —É—Å–Ω—É—Ç—å –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∂–∏—Ç–æ–≥–æ –∏–ª–∏ –±—É–¥—É—â–µ–≥–æ –¥–Ω—è –≤—Å–µ –≤—Ä–µ–º—è –∫—Ä—É—Ç—è—Ç—Å—è –≤ –≥–æ–ª–æ–≤–µ?',
            '–í —à–∫–æ–ª–µ –í—ã –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–ª–∏ –∏–ª–∏ –¥–∞–≤–∞–ª–∏ —Å–ø–∏—Å—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä–∏—â–∞–º.',
            '–í–∞–º –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –±—ã –±–æ–ª—å—à–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤–æ–ª–∏, —á—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ –Ω–æ—á—å—é –æ–¥–Ω–æ–º—É —á–µ—Ä–µ–∑ –∫–ª–∞–¥–±–∏—â–µ.',
            '–¢—â–∞—Ç–µ–ª—å–Ω–æ –ª–∏ –í—ã —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç–µ–º, —á—Ç–æ–±—ã –¥–æ–º–∞ –∫–∞–∂–¥–∞—è –≤–µ—â—å –±—ã–ª–∞ –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤–æ–µ–º –º–µ—Å—Ç–µ?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –í—ã –ª–æ–∂–∏—Ç–µ—Å—å –≤–µ—á–µ—Ä–æ–º —Å–ø–∞—Ç—å –≤ —Ö–æ—Ä–æ—à–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏, –∞ –Ω–∞—É—Ç—Ä–æ –≤—Å—Ç–∞–µ—Ç–µ –≤ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –¥–ª–∏—Ç—Å—è —á—É—Ç—å –ª–∏ –Ω–µ –≤–µ—Å—å –¥–µ–Ω—å?',
            '–õ–µ–≥–∫–æ –ª–∏ –í—ã –ø—Ä–∏–≤—ã–∫–∞–µ—Ç–µ –∫ –Ω–æ–≤—ã–º —Å–∏—Ç—É–∞—Ü–∏—è–º?',
            '–ë—ã–≤–∞—é—Ç –ª–∏ —É –í–∞—Å –≥–æ–ª–æ–≤–Ω—ã–µ –±–æ–ª–∏?',
            '–í—ã —á–∞—Å—Ç–æ —Å–º–µ–µ—Ç–µ—Å—å.',
            '–í—ã –º–æ–∂–µ—Ç–µ –±—ã—Ç—å –ø—Ä–∏–≤–µ—Ç–ª–∏–≤—ã–º –¥–∞–∂–µ —Å —Ç–µ–º–∏, –∫–æ–≥–æ –í—ã —è–≤–Ω–æ –Ω–µ —Ü–µ–Ω–∏—Ç–µ –∏ –Ω–µ —É–≤–∞–∂–∞–µ—Ç–µ.',
            '–í—ã –ø–æ–¥–≤–∏–∂–Ω—ã–π —á–µ–ª–æ–≤–µ–∫.',
            '–í—ã –æ—á–µ–Ω—å –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –∏–∑-–∑–∞ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏.',
            '–í—ã –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ª—é–±–∏—Ç–µ –ø—Ä–∏—Ä–æ–¥—É, —á—Ç–æ –º–æ–∂–µ—Ç–µ –Ω–∞–∑–≤–∞—Ç—å –µ–µ —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º.',
            '–£—Ö–æ–¥—è –∏–∑ –¥–æ–º–∞ –∏–ª–∏ –ª–æ–∂–∞—Å—å —Å–ø–∞—Ç—å, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –ª–∏ –í—ã, –∑–∞–∫—Ä—ã—Ç –ª–∏ –≥–∞–∑, –ø–æ–≥–∞—à–µ–Ω –ª–∏ —Å–≤–µ—Ç, –∑–∞–ø–µ—Ä—Ç—ã –ª–∏ –¥–≤–µ—Ä–∏?',
            '–í—ã –æ—á–µ–Ω—å –±–æ—è–∑–ª–∏–≤—ã.',
            '–ò–∑–º–µ–Ω—è–µ—Ç—Å—è –ª–∏ –í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–µ–º–µ –∞–ª–∫–æ–≥–æ–ª—è?',
            '–í —é–Ω–æ—Å—Ç–∏ –í—ã –æ—Ö–æ—Ç–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∞–º–æ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.',
            '–í—ã —Ä–∞—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –∂–∏–∑–Ω—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è —Ä–∞–¥–æ—Å—Ç–∏.',
            '–ß–∞—Å—Ç–æ –ª–∏ –í–∞—Å —Ç—è–Ω–µ—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å?',
            '–í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è —Ç–∞–∫ —Ä–µ–∑–∫–æ, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–¥–æ—Å—Ç–∏ –≤–¥—Ä—É–≥ —Å–º–µ–Ω—è–µ—Ç—Å—è —É–≥—Ä—é–º–æ—Å—Ç—å—é –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å—é.',
            '–õ–µ–≥–∫–æ –ª–∏ –≤–∞–º —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥—Ä—É–∑–µ–π –≤ –∫–æ–º–ø–∞–Ω–∏–∏?',
            '–î–æ–ª–≥–æ –ª–∏ –í—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –æ–±–∏–¥—É?',
            '–î–æ–ª–≥–æ –ª–∏ –í—ã –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç–µ –≥–æ—Ä–µ—Å—Ç–∏ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π?',
            '–ë—É–¥—É—á–∏ —à–∫–æ–ª—å–Ω–∏–∫–æ–º, –í—ã –Ω–µ—Ä–µ–¥–∫–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –µ—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —Å—Ç–∞–≤–∏–ª–∏ –Ω–∞ –Ω–µ–π –∫–ª—è–∫—Å—É.',
            '–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –ª—é–¥—è–º —Å–∫–æ—Ä–µ–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é –∏ –Ω–µ–¥–æ–≤–µ—Ä–∏–µ–º, —á–µ–º –¥–æ–≤–µ—Ä—á–∏–≤–æ—Å—Ç—å—é.',
            '–ß–∞—Å—Ç–æ –ª–∏ –í—ã –≤–∏–¥–∏—Ç–µ —Å—Ç—Ä–∞—à–Ω—ã–µ —Å–Ω—ã?',
            '–ë—ã–≤–∞–µ—Ç –ª–∏, —á—Ç–æ –≤—ã –æ—Å—Ç–µ—Ä–µ–≥–∞–µ—Ç–µ—Å—å —Ç–æ–≥–æ, —á—Ç–æ –±—Ä–æ—Å–∏—Ç–µ—Å—å –ø–æ–¥ –∫–æ–ª–µ—Å–∞ –ø—Ä–æ—Ö–æ–¥—è—â–µ–≥–æ –ø–æ–µ–∑–¥–∞ –∏–ª–∏ –≤—ã–ø–∞–¥–µ—Ç–µ –∏–∑ –æ–∫–Ω–∞, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –Ω–∞ –≤—ã—Å–æ–∫–æ–º —ç—Ç–∞–∂–µ?',
            '–í –≤–µ—Å–µ–ª–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –í—ã –æ–±—ã—á–Ω–æ –≤–µ—Å–µ–ª—ã.',
            '–°–ø–æ—Å–æ–±–Ω—ã –ª–∏ –í—ã –æ—Ç–≤–ª–µ—á—å—Å—è –æ—Ç —Ç—Ä—É–¥–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —Ç—Ä–µ–±—É—é—â–∏—Ö –í–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è?',
            '–í—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å –º–µ–Ω–µ–µ —Å–¥–µ—Ä–∂–∞–Ω–Ω—ã–º –∏ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è —Å–≤–æ–±–æ–¥–Ω–µ–µ –ø–æ–¥ –≤–ª–∏—è–Ω–∏–µ–º –∞–ª–∫–æ–≥–æ–ª—è.',
            '–í –±–µ—Å–µ–¥–µ –≤—ã —Å–∫—É–ø—ã –Ω–∞ —Å–ª–æ–≤–∞.',
            '–ï—Å–ª–∏ –±—ã –í–∞–º –Ω–∞–¥–æ –±—ã–ª–æ –∏–≥—Ä–∞—Ç—å –Ω–∞ —Å—Ü–µ–Ω–µ, –í—ã —Å–º–æ–≥–ª–∏ –±—ã –≤–æ–π—Ç–∏ –≤ —Ä–æ–ª—å –Ω–∞—Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ–±—ã –∑–∞–±—ã—Ç—å, —á—Ç–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∏–≥—Ä–∞.'
        ],
        options: [
            { text: '–î–∞', value: 'yes' },
            { text: '–ù–µ—Ç', value: 'no' }
        ]
    },
    test2: {
        title: '–¢–µ—Å—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ–¥—É—â–µ–π –ø–µ—Ä—Ü–µ–ø—Ç–∏–≤–Ω–æ–π –º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏',
        type: 'binary',
        questions: [
            '–õ—é–±–ª—é –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –æ–±–ª–∞–∫–∞–º–∏ –∏ –∑–≤–µ–∑–¥–∞–º–∏.',
            '–ß–∞—Å—Ç–æ –Ω–∞–ø–µ–≤–∞—é —Å–µ–±–µ –ø–æ—Ç–∏—Ö–æ–Ω—å–∫—É.',
            '–ù–µ –ø—Ä–∏–∑–Ω–∞—é –º–æ–¥—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ—É–¥–æ–±–Ω–∞.',
            '–õ—é–±–ª—é —Ö–æ–¥–∏—Ç—å –≤ —Å–∞—É–Ω—É.',
            '–í –∞–≤—Ç–æ–º–∞—à–∏–Ω–µ —Ü–≤–µ—Ç –¥–ª—è –º–µ–Ω—è –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.',
            '–£–∑–Ω–∞—é –ø–æ —à–∞–≥–∞–º, –∫—Ç–æ –≤–æ—à–µ–ª –≤ –ø–æ–º–µ—â–µ–Ω–∏–µ.',
            '–ú–µ–Ω—è —Ä–∞–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ–¥—Ä–∞–∂–∞–Ω–∏–µ –¥–∏–∞–ª–µ–∫—Ç–∞–º.',
            '–í–Ω–µ—à–Ω–µ–º—É –≤–∏–¥—É –ø—Ä–∏–¥–∞—é —Å–µ—Ä—å–µ–∑–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.',
            '–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø—Ä–∏–Ω–∏–º–∞—Ç—å –º–∞—Å—Å–∞–∂.',
            '–ö–æ–≥–¥–∞ –µ—Å—Ç—å –≤—Ä–µ–º—è, –ª—é–±–ª—é –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ª—é–¥—å–º–∏.',
            '–ü–ª–æ—Ö–æ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É—é, –∫–æ–≥–¥–∞ –Ω–µ –Ω–∞—Å–ª–∞–∂–¥–∞—é—Å—å –¥–≤–∏–∂–µ–Ω–∏–µ–º.',
            '–í–∏–¥—è –æ–¥–µ–∂–¥—É –≤ –≤–∏—Ç—Ä–∏–Ω–µ, –∑–Ω–∞—é, —á—Ç–æ –º–Ω–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ –≤ –Ω–µ–π.',
            '–ö–æ–≥–¥–∞ —É—Å–ª—ã—à—É —Å—Ç–∞—Ä—É—é –º–µ–ª–æ–¥–∏—é, –∫–æ –º–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–æ—à–ª–æ–µ.',
            '–õ—é–±–ª—é —á–∏—Ç–∞—Ç—å –≤–æ –≤—Ä–µ–º—è –µ–¥—ã.',
            '–õ—é–±–ª—é –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.',
            '–£ –º–µ–Ω—è –µ—Å—Ç—å —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –ø–æ–ª–Ω–æ—Ç–µ.',
            '–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —Å–ª—É—à–∞—Ç—å —Ä–∞—Å—Å–∫–∞–∑, –∫–æ—Ç–æ—Ä—ã–π –∫—Ç–æ-—Ç–æ —á–∏—Ç–∞–µ—Ç, —á–µ–º —á–∏—Ç–∞—Ç—å —Å–∞–º–æ–º—É.',
            '–ü–æ—Å–ª–µ –ø–ª–æ—Ö–æ–≥–æ –¥–Ω—è –º–æ–π –æ—Ä–≥–∞–Ω–∏–∑–º –≤ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏.',
            '–û—Ö–æ—Ç–Ω–æ –∏ –º–Ω–æ–≥–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É—é.',
            '–î–æ–ª–≥–æ –ø–æ–º–Ω—é, —á—Ç–æ –º–Ω–µ —Å–∫–∞–∑–∞–ª–∏ –ø—Ä–∏—è—Ç–µ–ª–∏ –∏–ª–∏ –∑–Ω–∞–∫–æ–º—ã–µ.',
            '–õ–µ–≥–∫–æ –º–æ–≥—É –æ—Ç–¥–∞—Ç—å –¥–µ–Ω—å–≥–∏ –∑–∞ —Ü–≤–µ—Ç—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —É–∫—Ä–∞—à–∞—é—Ç –∂–∏–∑–Ω—å.',
            '–í–µ—á–µ—Ä–æ–º –ª—é–±–ª—é –ø—Ä–∏–Ω—è—Ç—å –≥–æ—Ä—è—á—É—é –≤–∞–Ω–Ω—É.',
            '–°—Ç–∞—Ä–∞—é—Å—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–µ–ª–∞.',
            '–ß–∞—Å—Ç–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é —Å —Å–æ–±–æ–π.',
            '–ü–æ—Å–ª–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –µ–∑–¥—ã –Ω–∞ –º–∞—à–∏–Ω–µ –¥–æ–ª–≥–æ –ø—Ä–∏—Ö–æ–∂—É –≤ —Å–µ–±—è.',
            '–¢–µ–º–±—Ä –≥–æ–ª–æ—Å–∞ –º–Ω–æ–≥–æ–µ –º–Ω–µ –≥–æ–≤–æ—Ä–∏—Ç –æ —á–µ–ª–æ–≤–µ–∫–µ.',
            '–ü—Ä–∏–¥–∞—é –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞–Ω–µ—Ä–µ, —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ–π –¥—Ä—É–≥–∏–º, –∫–∞–∫ –æ–¥–µ–≤–∞—Ç—å—Å—è',
            '–õ—é–±–ª—é –ø–æ—Ç—è–≥–∏–≤–∞—Ç—å—Å—è, —Ä–∞—Å–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏, —Ä–∞–∑–º–∏–Ω–∞—Ç—å—Å—è.',
            '–°–ª–∏—à–∫–æ–º —Ç–≤–µ—Ä–¥–∞—è –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∞—è –ø–æ—Å—Ç–µ–ª—å –¥–ª—è –º–µ–Ω—è –º—É–∫–∞.',
            '–ú–Ω–µ –Ω–µ–ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ —É–¥–æ–±–Ω—É—é –æ–±—É–≤—å.',
            '–õ—é–±–ª—é —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–ª–µ- –∏ –≤–∏–¥–µ–æ—Ñ–∏–ª—å–º—ã.',
            '–î–∞–∂–µ —Å–ø—É—Å—Ç—è –≥–æ–¥—ã –º–æ–≥—É —É–∑–Ω–∞—Ç—å –ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª.',
            '–õ—é–±–ª—é —Ö–æ–¥–∏—Ç—å –ø–æ–¥ –¥–æ–∂–¥–µ–º, –∫–æ–≥–¥–∞ –∫–∞–ø–ª–∏ —Å—Ç—É—á–∞—Ç –ø–æ –∑–æ–Ω—Ç–∏–∫—É.',
            '–õ—é–±–ª—é —Å–ª—É—à–∞—Ç—å, –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç.',
            '–õ—é–±–ª—é –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ø–æ–¥–≤–∏–∂–Ω—ã–º —Å–ø–æ—Ä—Ç–æ–º –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –¥–≤–∏–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –∏–Ω–æ–≥–¥–∞ –∏ –ø–æ—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å.',
            '–ö–æ–≥–¥–∞ –±–ª–∏–∑–∫–æ —Ç–∏–∫–∞–µ—Ç –±—É–¥–∏–ª—å–Ω–∏–∫, –Ω–µ –º–æ–≥—É —É—Å–Ω—É—Ç—å.',
            '–£ –º–µ–Ω—è –Ω–µ–ø–ª–æ—Ö–∞—è —Å—Ç–µ—Ä–µ–æ–∞–ø–ø–∞—Ä–∞—Ç—É—Ä–∞.',
            '–ö–æ–≥–¥–∞ —Å–ª—É—à–∞—é –º—É–∑—ã–∫—É, –æ—Ç–±–∏–≤–∞—é —Ç–∞–∫—Ç –Ω–æ–≥–æ–π.',
            '–ù–∞ –æ—Ç–¥—ã—Ö–µ –Ω–µ –ª—é–±–ª—é –æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø–∞–º—è—Ç–Ω–∏–∫–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.',
            '–ù–µ –≤—ã–Ω–æ—à—É –±–µ—Å–ø–æ—Ä—è–¥–æ–∫.',
            '–ù–µ –ª—é–±–ª—é —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–∫–∞–Ω–µ–π.',
            '–°—á–∏—Ç–∞—é, —á—Ç–æ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Å–≤–µ—â–µ–Ω–∏—è.',
            '–ß–∞—Å—Ç–æ —Ö–æ–∂—É –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç—ã.',
            '–ü–æ–∂–∞—Ç–∏–µ —Ä—É–∫–∏ –º–Ω–æ–≥–æ –≥–æ–≤–æ—Ä–∏—Ç –º–Ω–µ –æ –¥–∞–Ω–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç–∏.',
            '–û—Ö–æ—Ç–Ω–æ –ø–æ—Å–µ—â–∞—é –≥–∞–ª–µ—Ä–µ–∏ –∏ –≤—ã—Å—Ç–∞–≤–∫–∏.',
            '–°–µ—Ä—å–µ–∑–Ω–∞—è –¥–∏—Å–∫—É—Å—Å–∏—è ‚Äì —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.',
            '–ß–µ—Ä–µ–∑ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ, —á–µ–º —Å–ª–æ–≤–∞–º–∏.',
            '–í —à—É–º–µ –Ω–µ –º–æ–≥—É —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è.'
        ],
        options: [
            { text: '–î–∞', value: 'yes' },
            { text: '–ù–µ—Ç', value: 'no' }
        ]
    },
    test3: {
        title: '–ì–æ—Å–ø–∏—Ç–∞–ª—å–Ω–∞—è –®–∫–∞–ª–∞ –¢—Ä–µ–≤–æ–≥–∏ –∏ –î–µ–ø—Ä–µ—Å—Å–∏–∏ (HADS)',
        type: 'multiple',
        parts: {
            anxiety: {
                title: '–ß–∞—Å—Ç—å I (–æ—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è –¢–†–ï–í–û–ì–ò)',
                questions: [
                    {
                        text: '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –º–Ω–µ –Ω–µ –ø–æ —Å–µ–±–µ',
                        options: [
                            { text: '–≤—Å–µ –≤—Ä–µ–º—è', value: 3 },
                            { text: '—á–∞—Å—Ç–æ', value: 2 },
                            { text: '–≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏, –∏–Ω–æ–≥–¥–∞', value: 1 },
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: 0 }
                        ]
                    },
                    {
                        text: '–ë–µ—Å–ø–æ–∫–æ–π–Ω—ã–µ –º—ã—Å–ª–∏ –∫—Ä—É—Ç—è—Ç—Å—è —É –º–µ–Ω—è –≤ –≥–æ–ª–æ–≤–µ',
                        options: [
                            { text: '–ø–æ—Å—Ç–æ—è–Ω–Ω–æ', value: 3 },
                            { text: '–±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏', value: 2 },
                            { text: '–≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ —Ç–∞–∫ —á–∞—Å—Ç–æ', value: 1 },
                            { text: '—Ç–æ–ª—å–∫–æ –∏–Ω–æ–≥–¥–∞', value: 0 }
                        ]
                    },
                    {
                        text: '–Ø –ª–µ–≥–∫–æ –º–æ–≥—É –ø—Ä–∏—Å–µ—Å—Ç—å –∏ —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è',
                        options: [
                            { text: '–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 0 },
                            { text: '–Ω–∞–≤–µ—Ä–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 1 },
                            { text: '–ª–∏—à—å –∏–∑—Ä–µ–¥–∫–∞, —ç—Ç–æ —Ç–∞–∫', value: 2 },
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ –º–æ–≥—É', value: 3 }
                        ]
                    },
                    {
                        text: '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏–ª–∏ –¥—Ä–æ–∂—å',
                        options: [
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: 0 },
                            { text: '–∏–Ω–æ–≥–¥–∞', value: 1 },
                            { text: '—á–∞—Å—Ç–æ', value: 2 },
                            { text: '–æ—á–µ–Ω—å —á–∞—Å—Ç–æ', value: 3 }
                        ]
                    },
                    {
                        text: '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –Ω–µ—É—Å–∏–¥—á–∏–≤–æ—Å—Ç—å, –º–Ω–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è',
                        options: [
                            { text: '–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 3 },
                            { text: '–Ω–∞–≤–µ—Ä–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 2 },
                            { text: '–ª–∏—à—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å—Ç–µ–ø–µ–Ω–∏, —ç—Ç–æ —Ç–∞–∫', value: 1 },
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: 0 }
                        ]
                    },
                    {
                        text: '–£ –º–µ–Ω—è –±—ã–≤–∞–µ—Ç –≤–Ω–µ–∑–∞–ø–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –ø–∞–Ω–∏–∫–∏',
                        options: [
                            { text: '–æ—á–µ–Ω—å —á–∞—Å—Ç–æ', value: 3 },
                            { text: '–¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ', value: 2 },
                            { text: '–Ω–µ —Ç–∞–∫ —É–∂ —á–∞—Å—Ç–æ', value: 1 },
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ –±—ã–≤–∞–µ—Ç', value: 0 }
                        ]
                    }
                ]
            },
            depression: {
                title: '–ß–∞—Å—Ç—å II (–æ—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è –î–ï–ü–†–ï–°–°–ò–ò)',
                questions: [
                    {
                        text: '–¢–æ, —á—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏–ª–æ –º–Ω–µ –±–æ–ª—å—à–æ–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ, –∏ —Å–µ–π—á–∞—Å –≤—ã–∑—ã–≤–∞–µ—Ç —É –º–µ–Ω—è —Ç–∞–∫–æ–µ –∂–µ —á—É–≤—Å—Ç–≤–æ',
                        options: [
                            { text: '–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 0 },
                            { text: '–Ω–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Ç–∞–∫', value: 1 },
                            { text: '–ª–∏—à—å –≤ –æ—á–µ–Ω—å –º–∞–ª–æ–π —Å—Ç–µ–ø–µ–Ω–∏, —ç—Ç–æ —Ç–∞–∫', value: 2 },
                            { text: '—ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫', value: 3 }
                        ]
                    },
                    {
                        text: '–Ø —Å–ø–æ—Å–æ–±–µ–Ω —Ä–∞—Å—Å–º–µ—è—Ç—å—Å—è –∏ —É–≤–∏–¥–µ—Ç—å –≤ —Ç–æ–º –∏–ª–∏ –∏–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏ —Å–º–µ—à–Ω–æ–µ',
                        options: [
                            { text: '–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 0 },
                            { text: '–Ω–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Ç–∞–∫', value: 1 },
                            { text: '–ª–∏—à—å –≤ –æ—á–µ–Ω—å –º–∞–ª–æ–π —Å—Ç–µ–ø–µ–Ω–∏, —ç—Ç–æ —Ç–∞–∫', value: 2 },
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ —Å–ø–æ—Å–æ–±–µ–Ω', value: 3 }
                        ]
                    },
                    {
                        text: '–Ø –∏—Å–ø—ã—Ç—ã–≤–∞—é –±–æ–¥—Ä–æ—Å—Ç—å',
                        options: [
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é', value: 3 },
                            { text: '–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ', value: 2 },
                            { text: '–∏–Ω–æ–≥–¥–∞', value: 1 },
                            { text: '–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –≤—Ä–µ–º—è', value: 0 }
                        ]
                    },
                    {
                        text: '–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è —Å—Ç–∞–ª –≤—Å–µ –¥–µ–ª–∞—Ç—å –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ',
                        options: [
                            { text: '–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –≤—Ä–µ–º—è', value: 3 },
                            { text: '—á–∞—Å—Ç–æ', value: 2 },
                            { text: '–∏–Ω–æ–≥–¥–∞', value: 1 },
                            { text: '—Å–æ–≤—Å–µ–º –Ω–µ—Ç', value: 0 }
                        ]
                    },
                    {
                        text: '–Ø –Ω–µ —Å–ª–µ–∂—É –∑–∞ —Å–≤–æ–µ–π –≤–Ω–µ—à–Ω–æ—Å—Ç—å—é',
                        options: [
                            { text: '–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ, —ç—Ç–æ —Ç–∞–∫', value: 3 },
                            { text: '—è –Ω–µ —É–¥–µ–ª—è—é —ç—Ç–æ–º—É —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ', value: 2 },
                            { text: '–º–æ–∂–µ—Ç –±—ã—Ç—å, —è —Å—Ç–∞–ª –º–µ–Ω—å—à–µ —É–¥–µ–ª—è—Ç—å —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏', value: 1 },
                            { text: '—è —Å–ª–µ–∂—É –∑–∞ —Å–æ–±–æ–π —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ', value: 0 }
                        ]
                    },
                    {
                        text: '–Ø —Å—á–∏—Ç–∞—é, —á—Ç–æ –º–æ–∏ –¥–µ–ª–∞ (–∑–∞–Ω—è—Ç–∏—è, —É–≤–ª–µ—á–µ–Ω–∏—è) –º–æ–≥—É—Ç –ø—Ä–∏–Ω–µ—Å—Ç–∏ –º–Ω–µ —á—É–≤—Å—Ç–≤–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏—è',
                        options: [
                            { text: '—Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –æ–±—ã—á–Ω–æ', value: 0 },
                            { text: '–¥–∞, –Ω–æ –Ω–µ –≤ —Ç–æ–π —Å—Ç–µ–ø–µ–Ω–∏, –∫–∞–∫ —Ä–∞–Ω—å—à–µ', value: 1 },
                            { text: '–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ, —á–µ–º –æ–±—ã—á–Ω–æ', value: 2 },
                            { text: '—Å–æ–≤—Å–µ–º —Ç–∞–∫ –Ω–µ —Å—á–∏—Ç–∞—é', value: 3 }
                        ]
                    },
                    {
                        text: '–Ø –º–æ–≥—É –ø–æ–ª—É—á–∏—Ç—å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç —Ö–æ—Ä–æ—à–µ–π –∫–Ω–∏–≥–∏, —Ä–∞–¥–∏–æ- –∏–ª–∏ —Ç–µ–ª–µ–ø—Ä–æ–≥—Ä–∞–º–º—ã',
                        options: [
                            { text: '—á–∞—Å—Ç–æ', value: 0 },
                            { text: '–∏–Ω–æ–≥–¥–∞', value: 1 },
                            { text: '—Ä–µ–¥–∫–æ', value: 2 },
                            { text: '–æ—á–µ–Ω—å —Ä–µ–¥–∫–æ', value: 3 }
                        ]
                    }
                ]
            }
        }
    },
    test4: {
        title: '–¢–µ—Å—Ç –Ω–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É',
        type: 'multiple',
        questions: [
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –≥–æ–ª–æ–≤–Ω—ã–µ –±–æ–ª–∏',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ù–µ—Ä–≤–æ–∑–Ω–æ—Å—Ç—å –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥—Ä–æ–∂—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–µ –Ω–µ–æ—Ç–≤—è–∑–Ω—ã–µ –º—ã—Å–ª–∏',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –°–ª–∞–±–æ—Å—Ç—å –∏–ª–∏ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü–æ—Ç–µ—Ä—è —Å–µ–∫—Å—É–∞–ª—å–Ω–æ–≥–æ –≤–ª–µ—á–µ–Ω–∏—è –∏–ª–∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—É–≤—Å—Ç–≤–æ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∞ –¥—Ä—É–≥–∏–º–∏',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–∞—à–∏–º–∏ –º—ã—Å–ª—è–º–∏',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –ø–æ—á—Ç–∏ –≤–æ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—è—Ö –≤–∏–Ω–æ–≤–∞—Ç—ã –¥—Ä—É–≥–∏–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –í–∞—à–∞ –Ω–µ–±—Ä–µ–∂–Ω–æ—Å—Ç—å –∏–ª–∏ –Ω–µ—Ä—è—à–ª–∏–≤–æ—Å—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –õ–µ–≥–∫–æ –≤–æ–∑–Ω–∏–∫–∞—é—â–∞—è –¥–æ—Å–∞–¥–∞ –∏–ª–∏ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ë–æ–ª–∏ –≤ —Å–µ—Ä–¥—Ü–µ –∏–ª–∏ –≥—Ä—É–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—É–≤—Å—Ç–≤–æ —Å—Ç—Ä–∞—Ö–∞ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–µ—Å—Ç–∞—Ö –∏–ª–∏ –Ω–∞ —É–ª–∏—Ü–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –£–ø–∞–¥–æ–∫ —Å–∏–ª –∏–ª–∏ –∑–∞—Ç–æ—Ä–º–æ–∂–µ–Ω–Ω–æ—Å—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ú—ã—Å–ª–∏ –æ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –¢–æ, —á—Ç–æ –≤—ã —Å–ª—ã—à–∏—Ç–µ –≥–æ–ª–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ —Å–ª—ã—à–∞—Ç –¥—Ä—É–≥–∏–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –î—Ä–æ–∂—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—É–≤—Å—Ç–≤–æ, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤—É –ª—é–¥–µ–π –Ω–µ–ª—å–∑—è –¥–æ–≤–µ—Ä—è—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü–ª–æ—Ö–æ–π –∞–ø–ø–µ—Ç–∏—Ç',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –°–ª–µ–∑–ª–∏–≤–æ—Å—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ó–∞—Å—Ç–µ–Ω—á–∏–≤–æ—Å—Ç—å –∏–ª–∏ —Å–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏ —Å –ª–∏—Ü–∞–º–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª–∞',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—ã –≤ –∑–∞–ø–∞–¥–Ω–µ –∏–ª–∏ –ø–æ–π–º–∞–Ω—ã',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –∏ –±–µ—Å–ø—Ä–∏—á–∏–Ω–Ω—ã–π —Å—Ç—Ä–∞—Ö',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –í—Å–ø—ã—à–∫–∏ –≥–Ω–µ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–µ —Å–º–æ–≥–ª–∏ —Å–¥–µ—Ä–∂–∞—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ë–æ—è–∑–Ω—å –≤—ã–π—Ç–∏ –∏–∑ –¥–æ–º–∞ –æ–¥–Ω–æ–º—É',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—É–≤—Å—Ç–≤–æ, —á—Ç–æ –≤—ã —Å–∞–º–∏ –≤–æ –º–Ω–æ–≥–æ–º –≤–∏–Ω–æ–≤–∞—Ç—ã',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ë–æ–ª–∏ –≤ –ø–æ—è—Å–Ω–∏—Ü–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –≤–∞–º –º–µ—à–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—É–≤—Å—Ç–≤–æ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, ¬´—Ö–∞–Ω–¥—Ä–∞¬ª',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ–≤–æ–¥–∞–º',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —á–µ–º—É –±—ã —Ç–æ –Ω–∏ –±—ã–ª–æ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ß—É–≤—Å—Ç–≤–æ —Å—Ç—Ä–∞—Ö–∞',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –¢–æ, —á—Ç–æ –≤–∞—à–∏ —á—É–≤—Å—Ç–≤–∞ –ª–µ–≥–∫–æ –∑–∞–¥–µ—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–Ω–∏–∫–∞—é—Ç –≤ –≤–∞—à–∏ –º—ã—Å–ª–∏',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –≤–∞—Å –∏–ª–∏ –Ω–µ —Å–æ—á—É–≤—Å—Ç–≤—É—é—Ç –≤–∞–º',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –ª—é–¥–∏ –Ω–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã –∏–ª–∏ –≤—ã –∏–º –Ω–µ –Ω—Ä–∞–≤–∏—Ç–µ—Å—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–µ–ª–∞—Ç—å –≤—Å–µ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –°–∏–ª—å–Ω–æ–µ –∏–ª–∏ —É—á–∞—â–µ–Ω–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –¢–æ—à–Ω–æ—Ç–∞ –∏–ª–∏ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∂–µ–ª—É–¥–∫–∞',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—ã —Ö—É–∂–µ –¥—Ä—É–≥–∏—Ö',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ë–æ–ª–∏ –≤ –º—ã—à—Ü–∞—Ö',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –Ω–∞–±–ª—é–¥–∞—é—Ç –∑–∞ –≤–∞–º–∏ –∏–ª–∏ –≥–æ–≤–æ—Ä—è—Ç –æ –≤–∞—Å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –¢–æ, —á—Ç–æ –≤–∞–º —Ç—Ä—É–¥–Ω–æ –∑–∞—Å–Ω—É—Ç—å',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ, —á—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏—è',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ë–æ—è–∑–Ω—å –µ–∑–¥–∏—Ç—å –≤ –º–µ—Ç—Ä–æ, –∞–≤—Ç–æ–±—É—Å–∞—Ö –∏–ª–∏ –ø–æ–µ–∑–¥–∞—Ö',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ó–∞—Ç—Ä—É–¥–Ω–µ–Ω–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ü—Ä–∏—Å—Ç—É–ø—ã –∂–∞—Ä–∞ –∏–ª–∏ –æ–∑–Ω–æ–±–∞',
            '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–∑–±–µ–≥–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –≤–∞—Å –ø—É–≥–∞—é—Ç'
        ],
        options: [
            { text: '–ù–∏–∫–æ–≥–¥–∞', value: 0 },
            { text: '–†–µ–¥–∫–æ', value: 1 },
            { text: '–ò–Ω–æ–≥–¥–∞', value: 2 },
            { text: '–ß–∞—Å—Ç–æ', value: 3 },
            { text: '–í—Å–µ–≥–¥–∞', value: 4 }
        ]
    }
};

// –ü–æ–ª–Ω—ã–µ —à–∫–∞–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
const testScales = {
    1: { // –ì–∏–ø–µ—Ä—Ç–∏–º–Ω–æ—Å—Ç—å
        positive: [1, 11, 23, 33, 45, 55, 67, 77],
        negative: [],
        multiplier: 3
    },
    2: { // –í–æ–∑–±—É–¥–∏–º–æ—Å—Ç—å
        positive: [2, 15, 24, 34, 37, 56, 68, 78, 81],
        negative: [],
        multiplier: 2
    },
    3: { // –≠–º–æ—Ç–∏–≤–Ω–æ—Å—Ç—å
        positive: [3, 13, 35, 47, 57, 69, 79],
        negative: [25],
        multiplier: 3
    },
    4: { // –ü–µ–¥–∞–Ω—Ç–∏—á–Ω–æ—Å—Ç—å
        positive: [4, 14, 17, 26, 39, 48, 58, 61, 70, 80, 83],
        negative: [36],
        multiplier: 2
    },
    5: { // –¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å
        positive: [16, 27, 38, 49, 60, 71, 82],
        negative: [5],
        multiplier: 3
    },
    6: { // –¶–∏–∫–ª–æ—Ç–∏–º–Ω–æ—Å—Ç—å
        positive: [6, 18, 28, 40, 50, 62, 72, 84],
        negative: [],
        multiplier: 3
    },
    7: { // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å
        positive: [7, 19, 22, 29, 41, 44, 63, 66, 73, 85, 88],
        negative: [51],
        multiplier: 2
    },
    8: { // –ù–µ—É—Ä–∞–≤–Ω–æ–≤–µ—à–µ–Ω–Ω–æ—Å—Ç—å
        positive: [8, 20, 30, 42, 52, 64, 74, 86],
        negative: [],
        multiplier: 3
    },
    9: { // –î–∏—Å—Ç–∏–º–Ω–æ—Å—Ç—å
        positive: [9, 21, 43, 75, 87],
        negative: [31, 53, 65],
        multiplier: 3
    },
    10: { // –≠–∫–∑–∞–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
        positive: [10, 32, 54, 76],
        negative: [],
        multiplier: 6
    }
};

const test2Scales = {
    visual: {
        questions: [1, 5, 8, 10, 12, 14, 19, 21, 23, 27, 31, 32, 39, 40, 42, 45]
    },
    audial: {
        questions: [2, 6, 7, 13, 15, 17, 20, 24, 26, 33, 34, 36, 37, 43, 46, 48]
    },
    kinesthetic: {
        questions: [3, 4, 9, 11, 16, 18, 22, 25, 28, 29, 30, 35, 38, 41, 44, 47]
    }
};

const test4Scale = {
    selfEsteem: {
        low: [0, 10],
        belowAverage: [11, 20],
        average: [21, 30],
        aboveAverage: [31, 40],
        high: [41, 50]
    }
};

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function isAdmin(chatId) {
    return admins.includes(chatId);
}

function isValidFullName(name) {
    return /^[–ê-–Ø–Å][–∞-—è—ë]+\s[–ê-–Ø–Å][–∞-—è—ë]+\s[–ê-–Ø–Å][–∞-—è—ë]+$/.test(name);
}

function isValidAge(age) {
    return !isNaN(age) && age >= 1 && age <= 120;
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
async function checkExistingUser(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT * FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(!!row);
        });
    });
}

async function clearUserData(chatId) {
    return new Promise((resolve, reject) => {
        db.run('DELETE FROM responses WHERE chat_id = ?', [chatId], (err) => {
            if (err) reject(err);
            resolve();
        });
    });
}

async function getUserStage(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT stage FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row ? row.stage : 'start');
        });
    });
}

async function getLastMessageId(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT message_id FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row ? row.message_id : null);
        });
    });
}

async function getChatGPTRecommendation(testResults) {
    try {
        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –≤ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
        const formattedResults = {
            test1: testResults.test1 ? `–ê–∫—Ü–µ–Ω—Ç—É–∞—Ü–∏–∏: ${testResults.test1.description}` : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
            test2: testResults.test2 ? `–¢–∏–ø –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è: ${testResults.test2.description}` : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
            test3: testResults.test3 ? `–¢—Ä–µ–≤–æ–≥–∞ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏—è: ${testResults.test3.description}` : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö',
            test4: testResults.test4 ? `–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞: –£—Ä–æ–≤–µ–Ω—å - ${testResults.test4.level}, –°—á–µ—Ç - ${testResults.test4.score}` : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö'
        };

        const response = await openai.chat.completions.create({
    model: "gpt-4o-mini", // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å –≤–º–µ—Å—Ç–æ gpt-4o-mini
    messages: [{
        role: "system",
        content: "–í–´ - –í–ï–î–£–©–ò–ô –≠–ö–°–ü–ï–†–¢-–ü–°–ò–•–û–õ–û–ì –° –ì–õ–£–ë–û–ö–û–ô –°–ü–ï–¶–ò–ê–õ–ò–ó–ê–¶–ò–ï–ô –í –û–ë–õ–ê–°–¢–ò –ü–°–ò–•–û–§–ò–ó–ò–û–õ–û–ì–ò–ß–ï–°–ö–ò–• –ò –ö–û–ì–ù–ò–¢–ò–í–ù–´–• –†–ï–õ–ê–ö–°–ê–¶–ò–û–ù–ù–´–• –¢–ï–•–ù–ò–ö. –í–ê–® –ü–û–î–•–û–î –ë–ê–ó–ò–†–£–ï–¢–°–Ø –ù–ê –ù–ê–£–ß–ù–û–ú –ê–ù–ê–õ–ò–ó–ï –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–ò–• –î–ê–ù–ù–´–•, –ò –í–´ –ü–†–ï–î–õ–ê–ì–ê–ï–¢–ï –¢–û–ß–ù–´–ï, –ü–ï–†–°–û–ù–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –†–ï–®–ï–ù–ò–Ø –î–õ–Ø –°–ù–ò–ñ–ï–ù–ò–Ø –°–¢–†–ï–°–°–ê –ò –ü–û–í–´–®–ï–ù–ò–Ø –ë–õ–ê–ì–û–ü–û–õ–£–ß–ò–Ø."
    }, {
        role: "user",
        content: `–ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã—Ö –Ω–∏–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏ –æ–ø–∏—à–∏—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é —Ç–µ—Ö–Ω–∏–∫—É —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏. –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–û–í:\n\n. 
                
                ${Object.entries(formattedResults).map(([test, result]) => `${test}: ${result}`).join('\n')}
                
                –ê–ù–ê–õ–ò–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í: –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∏—Å—Ö–æ–¥—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.\n2. –í–´–ë–û–† –¢–ï–•–ù–ò–ö–ò: –ü–æ–¥–±–µ—Ä–∏—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é —Ç–µ—Ö–Ω–∏–∫—É —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏ —Å —É—á—ë—Ç–æ–º –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.\n3. –ü–û–î–†–û–ë–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï: –û–ø–∏—à–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É –ø–æ—à–∞–≥–æ–≤–æ, –≤–∫–ª—é—á–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é.\n4. –û–ë–û–°–ù–û–í–ê–ù–ò–ï –í–´–ë–û–†–ê: –û–±—ä—è—Å–Ω–∏—Ç–µ, –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∞ —Ç–µ—Ö–Ω–∏–∫–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ —Å —Ç–∞–∫–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–æ–≤ –∏ –∫–∞–∫–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å.\n\n –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –û–¢–í–ï–¢–£:\n- –ß—ë—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –∞–Ω–∞–ª–∏–∑ ‚Üí —Ç–µ—Ö–Ω–∏–∫–∞ ‚Üí –ø–æ—à–∞–≥–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ ‚Üí –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ.\n- –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π —è–∑—ã–∫, –∏—Å–∫–ª—é—á–∞—é—â–∏–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.\n- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –¥–æ–º–∞—à–Ω–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö.\n- –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞–∫ –ø—Å–∏—Ö–æ—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ, —Ç–∞–∫ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è.\n\n–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (–ó–ê–ü–†–ï–©–ï–ù–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –ó–í–Å–ó–î–û–ß–ö–ò):\n1. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:\n - [–í—ã–¥–µ–ª–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã].\n2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ç–µ—Ö–Ω–∏–∫–∞:\n - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏.\n3. –ü–æ—à–∞–≥–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:\n - –®–∞–≥ 1: ...\n - –®–∞–≥ 2: ...\n - –∏ —Ç.–¥.\n4. –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞:\n - [–ü–æ—è—Å–Ω–∏—Ç–µ, –ø–æ—á–µ–º—É —Ç–µ—Ö–Ω–∏–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –∏ –∫–∞–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å].\n–§–û–†–ú–ê–¢–ò–†–£–ô–¢–ï –¢–ï–ö–°–¢ –ß–ò–°–¢–û, –ë–ï–ó –ú–ê–†–ö–ï–†–û–í, –ó–í–Å–ó–î–û–ß–ï–ö –ò –õ–ò–®–ù–ò–• –°–ò–ú–í–û–õ–û–í.`
    }],
    temperature: 0.7,
    max_tokens: 1000
});

        if (!response.choices || response.choices.length === 0) {
            throw new Error('–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç GPT');
        }

        const recommendation = response.choices[0].message.content;
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        return `üßò‚Äç‚ôÇÔ∏è –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏:\n\n${recommendation}`;

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç GPT:', error);
        return '–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.';
    }
}

async function getUserGender(chatId) {
    return new Promise((resolve, reject) => {
        db.get('SELECT gender FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) reject(err);
            resolve(row ? row.gender : null);
        });
    });
}

async function saveResponse(chatId, data) {
    return new Promise((resolve, reject) => {
        db.get('SELECT * FROM responses WHERE chat_id = ?', [chatId], (err, row) => {
            if (err) {
                reject(err);
                return;
            }

            const fields = [
                'username', 'full_name', 'age', 'gender', 'taking_meds',
                'meds_details', 'pregnant', 'stage', 'current_test',
                'message_id'
            ];

            if (row) {
                const updateQuery = `
                    UPDATE responses SET
                    ${fields.map(f => `${f} = COALESCE(?, ${f})`).join(', ')}
                    WHERE chat_id = ?
                `;

                db.run(updateQuery, [...fields.map(f => data[f]), chatId], (err) => {
                    if (err) reject(err);
                    else resolve();
                });
            } else {
                const insertQuery = `
                    INSERT INTO responses (
                        chat_id, ${fields.join(', ')}
                    ) VALUES (${new Array(fields.length + 1).fill('?').join(', ')})
                `;

                db.run(insertQuery, [chatId, ...fields.map(f => data[f])], (err) => {
                    if (err) reject(err);
                    else resolve();
                });
            }
        });
    });
}

async function saveTestResult(chatId, testNumber, result, recommendation = null) {
    return new Promise((resolve, reject) => {
        const resultStr = JSON.stringify(result);
        // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        const query = recommendation
            ? `UPDATE responses 
               SET ${testNumber}_answers = ?, recommendation = ? 
               WHERE chat_id = ?`
            : `UPDATE responses 
               SET ${testNumber}_answers = ? 
               WHERE chat_id = ?`;

        // –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
        const params = recommendation
            ? [resultStr, recommendation, chatId]
            : [resultStr, chatId];

        db.run(query, params, (err) => {
            if (err) {
                console.error(`Error saving ${testNumber} results:`, err);
                reject(err);
            } else {
                // console.log(`Successfully saved ${testNumber} results${recommendation ? ' and recommendation' : ''}`);
                resolve();
            }
        });
    });
}

// –§—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
async function exportDatabase(chatId) {
    return new Promise((resolve, reject) => {
        db.all('SELECT * FROM responses', [], async (err, rows) => {
            if (err) {
                reject(err);
                return;
            }

            const workbook = new ExcelJS.Workbook();
            const worksheet = workbook.addWorksheet('Responses');

            worksheet.columns = [
                { header: 'ID', key: 'id' },
                { header: 'Chat ID', key: 'chat_id' },
                { header: 'Username', key: 'username' },
                { header: '–§–ò–û', key: 'full_name' },
                { header: '–í–æ–∑—Ä–∞—Å—Ç', key: 'age' },
                { header: '–ü–æ–ª', key: 'gender' },
                { header: '–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã', key: 'taking_meds' },
                { header: '–ö–∞–∫–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã', key: 'meds_details' },
                { header: '–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å', key: 'pregnant' },
                { header: '–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ 1', key: 'test1_answers' },
                { header: '–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ 2', key: 'test2_answers' },
                { header: '–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ 3', key: 'test3_answers' },
                { header: '–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ 4', key: 'test4_answers' },
                { header: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è', key: 'recommendation' }
            ];

            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
            const processedRows = rows.map(row => ({
                ...row,
                test1_answers: row.test1_answers ? JSON.parse(row.test1_answers) : null,
                test2_answers: row.test2_answers ? JSON.parse(row.test2_answers) : null,
                test3_answers: row.test3_answers ? JSON.parse(row.test3_answers) : null,
                test4_answers: row.test4_answers ? JSON.parse(row.test4_answers) : null
            }));

            worksheet.addRows(processedRows);

            const fileName = `responses_${Date.now()}.xlsx`;
            await workbook.xlsx.writeFile(fileName);
            await bot.sendDocument(chatId, fileName);
            fs.unlinkSync(fileName);
            resolve();
        });
    });
}

// –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø–∞–º—è—Ç–∏
const userAnswers = new Map();

function initUserAnswers(chatId, testNumber) {
    if (!userAnswers.has(chatId)) {
        userAnswers.set(chatId, {});
    }
    userAnswers.get(chatId)[testNumber] = [];
}

function saveAnswer(chatId, testNumber, questionIndex, answer) {
    const answers = userAnswers.get(chatId)[testNumber];
    answers[questionIndex] = answer;
}

function getAnswers(chatId, testNumber) {
    return userAnswers.get(chatId)[testNumber] || [];
}

function clearAnswers(chatId) {
    userAnswers.delete(chatId);
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
async function startTest(chatId) {
    try {
        const test = tests.test1;
        const messageText = `–ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.\n\n${test.title}`;

        const message = await bot.sendMessage(chatId, messageText, {
            reply_markup: {
                inline_keyboard: [
                    [{ text: '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', callback_data: 'start_test_1' }]
                ]
            }
        });

        await saveResponse(chatId, { 
            current_test: 'test1',
            message_id: message.message_id
        });
        initUserAnswers(chatId, 'test1');

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ—Å—Ç–æ–≤
async function startSecondTest(chatId) {
    try {
        const test = tests.test2;
        const messageText = `
–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–π–¥–µ–º –≤—Ç–æ—Ä–æ–π —Ç–µ—Å—Ç!

${test.title}

–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—à –≤–µ–¥—É—â–∏–π –∫–∞–Ω–∞–ª –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.`;

        const message = await bot.sendMessage(chatId, messageText, {
            reply_markup: {
                inline_keyboard: [
                    [{ text: '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç ‚Ññ2', callback_data: 'start_test_2' }]
                ]
            }
        });

        await saveResponse(chatId, {
            current_test: 'test2',
            message_id: message.message_id
        });
        initUserAnswers(chatId, 'test2');

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤—Ç–æ—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

async function startThirdTest(chatId) {
    try {
        const test = tests.test3;
        const messageText = `
–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–π–¥–µ–º —Ç—Ä–µ—Ç–∏–π —Ç–µ—Å—Ç!

${test.title}

–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–º–æ–∂–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –≤–∞—à–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.`;

    const message = await bot.sendMessage(chatId, messageText, {
        reply_markup: {
            inline_keyboard: [
                [{ text: '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç ‚Ññ3', callback_data: 'start_test_3_anxiety' }]
            ]
        }
    });

    await saveResponse(chatId, {
        current_test: 'test3',
        message_id: message.message_id
    });
    initUserAnswers(chatId, 'test3');

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ç–µ—Å—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

async function askTestQuestion(chatId, testNumber, questionIndex) {
    const test = tests[testNumber];
    const question = test.questions[questionIndex];
    
    const message = await bot.sendMessage(
        chatId,
        `–í–æ–ø—Ä–æ—Å ${questionIndex + 1}/${test.questions.length}:\n${question}`,
        {
            reply_markup: createAnswerKeyboard(testNumber, questionIndex)
        }
    );
    
    await saveResponse(chatId, { 
        message_id: message.message_id,
        current_test: testNumber
    });
}

async function askTest3Question(chatId, part, questionIndex) {
    const test = tests.test3;
    const questions = test.parts[part].questions;
    const question = questions[questionIndex];
    
    const message = await bot.sendMessage(
        chatId,
        `${test.parts[part].title}\n\n–í–æ–ø—Ä–æ—Å ${questionIndex + 1}/${questions.length}:\n${question.text}`,
        {
            reply_markup: createTest3Keyboard(part, questionIndex)
        }
    );
    
    await saveResponse(chatId, { message_id: message.message_id });
}

function createAnswerKeyboard(testNumber, questionIndex) {
    const test = tests[testNumber];
    return {
        inline_keyboard: test.options.map(option => [{
            text: option.text,
            callback_data: `answer_${testNumber}_${questionIndex}_${option.value}`
        }])
    };
}
function createTest3Keyboard(part, questionIndex) {
    const test = tests.test3;
    const question = test.parts[part].questions[questionIndex];
    return {
        inline_keyboard: question.options.map((option, index) => [{
            text: option.text,
            callback_data: `answer_test3_${part}_${questionIndex}_${index}`
        }])
    };
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∞ 4
function createTest4Keyboard(questionIndex) {
    const test = tests.test4;
    return {
        inline_keyboard: test.options.map((option, index) => [{
            text: option.text,
            callback_data: `answer_test4_${questionIndex}_${index}`
        }])
    };
}

// –§—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
async function analyzeTest1Results(answers) {
    const results = {};
    
    for (const [scaleNumber, scale] of Object.entries(testScales)) {
        let score = 0;
        
        scale.positive.forEach(questionIndex => {
            if (answers[questionIndex - 1] === 'yes') {
                score++;
            }
        });
        
        scale.negative.forEach(questionIndex => {
            if (answers[questionIndex - 1] === 'no') {
                score++;
            }
        });
        
        results[scaleNumber] = score * scale.multiplier;
    }
    
    const maxScore = Math.max(...Object.values(results));
    const dominantScales = Object.entries(results)
        .filter(([_, score]) => score === maxScore && score > 0)
        .map(([scale, _]) => parseInt(scale));
    
    return {
        dominantScales,
        maxScore,
        description: getTest1Description(dominantScales, maxScore)
    };
}

async function analyzeTest2Results(answers) {
    const results = {
        visual: 0,
        audial: 0,
        kinesthetic: 0
    };

    Object.entries(test2Scales).forEach(([type, scale]) => {
        scale.questions.forEach(questionNum => {
            if (answers[questionNum - 1] === 'yes') {
                results[type]++;
            }
        });
    });

    const maxScore = Math.max(...Object.values(results));
    const dominantTypes = Object.entries(results)
        .filter(([_, score]) => score === maxScore)
        .map(([type, _]) => type);

    return {
        scores: results,
        dominantTypes,
        description: getTest2Description(results)
    };
}

async function analyzeTest3Results(answers) {
    let anxietyScore = 0;
    let depressionScore = 0;

    if (answers.anxiety) {
        answers.anxiety.forEach((answerIndex, questionIndex) => {
            const question = tests.test3.parts.anxiety.questions[questionIndex];
            anxietyScore += question.options[answerIndex].value;
        });
    }

    if (answers.depression) {
        answers.depression.forEach((answerIndex, questionIndex) => {
            const question = tests.test3.parts.depression.questions[questionIndex];
            depressionScore += question.options[answerIndex].value;
        });
    }

    return {
        anxiety: anxietyScore,
        depression: depressionScore,
        description: getTest3Description(anxietyScore, depressionScore)
    };
}

async function startFourthTest(chatId) {
    try {
        const test = tests.test4;
        const messageText = `
–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–π–¥–µ–º —á–µ—Ç–≤–µ—Ä—Ç—ã–π —Ç–µ—Å—Ç!

${test.title}

–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–º–æ–∂–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –≤–∞—à—É —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É.`;

        const message = await bot.sendMessage(chatId, messageText, {
            reply_markup: {
                inline_keyboard: [
                    [{ text: '–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç ‚Ññ4', callback_data: 'start_test_4' }]
                ]
            }
        });

        await saveResponse(chatId, {
            current_test: 'test4',
            message_id: message.message_id
        });
        initUserAnswers(chatId, 'test4');

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

async function askTest4Question(chatId, questionIndex) {
    const test = tests.test4;
    const question = test.questions[questionIndex];

    const message = await bot.sendMessage(
        chatId,
        `–í–æ–ø—Ä–æ—Å ${questionIndex + 1}/${test.questions.length}:\n${question}`,
        {
            reply_markup: createTest4Keyboard(questionIndex)
        }
    );

    await saveResponse(chatId, { message_id: message.message_id });
}

async function getTestResult(chatId, testNumber) {
    return new Promise((resolve, reject) => {
      db.get(`SELECT ${testNumber}_answers FROM responses WHERE chat_id = ?`, [chatId], (err, row) => {
        if (err) {
          reject(err);
        } else {
          const testResult = row ? JSON.parse(row[`${testNumber}_answers`]) : null;
          resolve(testResult);
        }
      });
    });
  }

  async function handleTest4Answer(chatId, questionIndex, optionIndex) {
    try {
        const test = tests.test4;

        if (!userAnswers.has(chatId)) {
            userAnswers.set(chatId, {});
        }

        if (!userAnswers.get(chatId).test4) {
            userAnswers.get(chatId).test4 = [];
        }

        userAnswers.get(chatId).test4[questionIndex] = parseInt(optionIndex);

        if (questionIndex + 1 < test.questions.length) {
            await askTest4Question(chatId, questionIndex + 1);
        } else {
            // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞
            const test4Results = await analyzeTest4Results(userAnswers.get(chatId).test4);

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
            await bot.sendMessage(chatId, '–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø–æ–¥–±–∏—Ä–∞—é —Ç–µ—Ö–Ω–∏–∫—É —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏...');
            const testResults = {
                test1: await getTestResult(chatId, 'test1'),
                test2: await getTestResult(chatId, 'test2'),
                test3: await getTestResult(chatId, 'test3'),
                test4: test4Results
            };
            const recommendation = await getChatGPTRecommendation(testResults);
            // console.log('Generated recommendation:', recommendation);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
            await saveTestResult(chatId, 'test4', test4Results, recommendation);

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            await bot.sendMessage(chatId, recommendation);

            // –û—á–∏—â–∞–µ–º –æ—Ç–≤–µ—Ç—ã –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
            clearAnswers(chatId);
            scheduleReminder(chatId);

        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}
async function analyzeTest4Results(answers) {
    const score = answers.reduce((sum, answer) => sum + answer, 0);

    let level = '';
    for (const [key, range] of Object.entries(test4Scale.selfEsteem)) {
        if (score >= range[0] && score <= range[1]) {
            level = key;
            break;
        }
    }

    return {
        score,
        level,
        description: getTest4Description({ score, level })
    };
}

// async function analyzeTest4Results(answers) {
//     const score = answers.reduce((sum, answer) => sum + answer, 0);

//     let level = '';
//     for (const [key, range] of Object.entries(test4Scale.selfEsteem)) {
//         if (score >= range[0] && score <= range[1]) {
//             level = key;
//             break;
//         }
//     }

//     return {
//         score,
//         level
//     };
// }

function getTest4Description({ score, level }) {
    const descriptions = {
        low: '–£ –≤–∞—Å –Ω–∏–∑–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞. –í—ã —Å–∫–ª–æ–Ω–Ω—ã –Ω–µ–¥–æ–æ—Ü–µ–Ω–∏–≤–∞—Ç—å —Å–≤–æ–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —á–∞—Å—Ç–æ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –ø–æ–≤—ã—à–µ–Ω–∏–µ–º —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–≤–æ–∏—Ö —Å–∏–ª–∞—Ö.',
        belowAverage: '–í–∞—à–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è –≤ —Å–≤–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–∏—Ç–µ –≤ —É—Å–ø–µ—Ö. –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–≤–æ–∏—Ö —Å–∏–ª—å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Å–µ–±–µ.',
        average: '–£ –≤–∞—Å —Å—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏. –í—ã –≤ —Ü–µ–ª–æ–º —É–≤–µ—Ä–µ–Ω—ã –≤ —Å–µ–±–µ, –Ω–æ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º —Å–≤–æ–∏—Ö —Å–∏–ª—å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω –∏ –Ω–µ –±–æ–π—Ç–µ—Å—å –±—Ä–∞—Ç—å—Å—è –∑–∞ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏.',
        aboveAverage: '–í–∞—à–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ. –í—ã —É–≤–µ—Ä–µ–Ω—ã –≤ —Å–≤–æ–∏—Ö —Å–∏–ª–∞—Ö, —Å–ø–æ—Å–æ–±–Ω—ã —Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Ü–µ–ª–∏ –∏ –¥–æ—Å—Ç–∏–≥–∞—Ç—å –∏—Ö. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π –∏ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º —Ä–∞–∑–≤–∏—Ç–∏–∏.',
        high: '–£ –≤–∞—Å –≤—ã—Å–æ–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞. –í—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–≤–µ—Ä–µ–Ω—ã –≤ —Å–µ–±–µ, —Å–≤–æ–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è—Ö –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö. –í—ã –ª–µ–≥–∫–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å —Å —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ –∏ –≥–æ—Ç–æ–≤—ã –±—Ä–∞—Ç—å—Å—è –∑–∞ –ª—é–±—ã–µ –∑–∞–¥–∞—á–∏. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!'
    };

    return `üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏\n\n–£—Ä–æ–≤–µ–Ω—å —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏: ${descriptions[level]}`;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤
// –í —Ñ—É–Ω–∫—Ü–∏–∏ handleTestAnswer
async function handleTest1Answer(chatId, questionIndex, value) {
    try {
        const test = tests.test1;

        if (!userAnswers.has(chatId)) {
            userAnswers.set(chatId, {});
        }

        if (!userAnswers.get(chatId).test1) {
            userAnswers.get(chatId).test1 = [];
        }

        userAnswers.get(chatId).test1[questionIndex] = value;

        if (questionIndex + 1 < test.questions.length) {
            await askTestQuestion(chatId, 'test1', questionIndex + 1);
        } else {
            const test1Results = await analyzeTest1Results(userAnswers.get(chatId).test1);
            // console.log('Test 1 Results:', test1Results);
            await saveTestResult(chatId, 'test1', test1Results);
            await bot.sendMessage(chatId, test1Results.description);
            await startSecondTest(chatId);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–∞ —Ç–µ—Å—Ç–∞ 1:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

async function handleTest2Answer(chatId, questionIndex, value) {
    try {
        const test = tests.test2;

        if (!userAnswers.has(chatId)) {
            userAnswers.set(chatId, {});
        }

        if (!userAnswers.get(chatId).test2) {
            userAnswers.get(chatId).test2 = [];
        }

        userAnswers.get(chatId).test2[questionIndex] = value;

        if (questionIndex + 1 < test.questions.length) {
            await askTestQuestion(chatId, 'test2', questionIndex + 1);
        } else {
            const test2Results = await analyzeTest2Results(userAnswers.get(chatId).test2);
            // console.log('Test 2 Results:', test2Results);
            await saveTestResult(chatId, 'test2', test2Results);
            await bot.sendMessage(chatId, test2Results.description);
            await startThirdTest(chatId);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–∞ —Ç–µ—Å—Ç–∞ 2:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

async function handleTest3Answer(chatId, part, questionIndex, optionIndex) {
    try {
        if (!userAnswers.has(chatId)) {
            userAnswers.set(chatId, {});
        }
        
        if (!userAnswers.get(chatId).test3) {
            userAnswers.get(chatId).test3 = {};
        }

        if (!userAnswers.get(chatId).test3[part]) {
            userAnswers.get(chatId).test3[part] = [];
        }
        
        userAnswers.get(chatId).test3[part][questionIndex] = parseInt(optionIndex);

        const questions = tests.test3.parts[part].questions;
        if (questionIndex + 1 < questions.length) {
            await askTest3Question(chatId, part, questionIndex + 1);
        } else if (part === 'anxiety') {
            const message = await bot.sendMessage(chatId, 
                '–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –∫–æ –≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏ —Ç–µ—Å—Ç–∞ - –æ—Ü–µ–Ω–∫–µ —É—Ä–æ–≤–Ω—è –¥–µ–ø—Ä–µ—Å—Å–∏–∏.',
                {
                    reply_markup: {
                        inline_keyboard: [
                            [{ text: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å', callback_data: 'start_test_3_depression' }]
                        ]
                    }
                }
            );
            await saveResponse(chatId, { message_id: message.message_id });
        } else {
            const results = await analyzeTest3Results(userAnswers.get(chatId).test3);
            // console.log('Test 3 Results:', results); // –î–æ–±–∞–≤–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
            await saveTestResult(chatId, 'test3', results);
            await bot.sendMessage(chatId, results.description);
            await startFourthTest(chatId);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–∞:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
}

// –§—É–Ω–∫—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤
function getTest1Description(dominantScales, score) {
    const descriptions = {
        1: `–ì–∏–ø–µ—Ä—Ç–∏–º–Ω—ã–π —Ç–∏–ø. –õ—é–¥–µ–π —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –æ—Ç–ª–∏—á–∞–µ—Ç –±–æ–ª—å—à–∞—è –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å, –æ–±—â–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–æ–ª—Ç–ª–∏–≤–æ—Å—Ç—å, –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ—Å—Ç—å –∂–µ—Å—Ç–æ–≤, –º–∏–º–∏–∫–∏, –ø–∞–Ω—Ç–æ–º–∏–º–∏–∫–∏, —á—Ä–µ–∑–º–µ—Ä–Ω–∞—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –æ–∑–æ—Ä—Å—Ç–≤—É, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —á—É–≤—Å—Ç–≤–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Å –¥—Ä—É–≥–∏–º–∏. –ß–∞—Å—Ç–æ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –æ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —Ç–µ–º—ã –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ. –í–µ–∑–¥–µ –≤–Ω–æ—Å—è—Ç –º–Ω–æ–≥–æ —à—É–º–∞, –ª—é–±—è—Ç –∫–æ–º–ø–∞–Ω–∏–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤, —Å—Ç—Ä–µ–º—è—Ç—Å—è –∏–º–∏ –∫–æ–º–∞–Ω–¥–æ–≤–∞—Ç—å. –û–Ω–∏ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Ö–æ—Ä–æ—à–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –≤—ã—Å–æ–∫–∏–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ç–æ–Ω—É—Å, –Ω–µ—Ä–µ–¥–∫–æ —Ü–≤–µ—Ç—É—â–∏–π –≤–∏–¥, —Ö–æ—Ä–æ—à–∏–π –∞–ø–ø–µ—Ç–∏—Ç, –∑–¥–æ—Ä–æ–≤—ã–π —Å–æ–Ω, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ —á—Ä–µ–≤–æ—É–≥–æ–¥–∏—é –∏ –∏–Ω—ã–º —Ä–∞–¥–æ—Å—Ç—è–º –∂–∏–∑–Ω–∏. –≠—Ç–æ –ª—é–¥–∏ —Å –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–∞–º–æ–æ—Ü–µ–Ω–∫–æ–π, –≤–µ—Å–µ–ª—ã–µ, –ª–µ–≥–∫–æ–º—ã—Å–ª–µ–Ω–Ω—ã–µ, –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–µ –∏ –≤–º–µ—Å—Ç–µ —Å —Ç–µ–º –¥–µ–ª–æ–≤–∏—Ç—ã–µ, –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–µ, –±–ª–µ—Å—Ç—è—â–∏–µ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∏; –ª—é–¥–∏, —É–º–µ—é—â–∏–µ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å –¥—Ä—É–≥–∏—Ö, —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–µ, –¥–µ—è—Ç–µ–ª—å–Ω—ã–µ, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ.`,
        2: `–í–æ–∑–±—É–¥–∏–º—ã–π —Ç–∏–ø. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —É–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å, –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –≤–ª–µ—á–µ–Ω–∏—è–º–∏ –∏ –ø–æ–±—É–∂–¥–µ–Ω–∏—è–º–∏ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è —É –ª—é–¥–µ–π —Ç–∞–∫–æ–≥–æ —Ç–∏–ø–∞ —Å –≤–ª–∞—Å—Ç—å—é —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≤–ª–µ—á–µ–Ω–∏–π. –ï–º—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–∞ –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å, –∏–Ω—Å—Ç–∏–Ω–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –≥—Ä—É–±–æ—Å—Ç—å, –∑–∞–Ω—É–¥—Å—Ç–≤–æ, —É–≥—Ä—é–º–æ—Å—Ç—å, –≥–Ω–µ–≤–ª–∏–≤–æ—Å—Ç—å, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ —Ö–∞–º—Å—Ç–≤—É –∏ –±—Ä–∞–Ω–∏, –∫ —Ç—Ä–µ–Ω–∏—è–º –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å–∞–º –∏ —è–≤–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π, –ø—Ä–æ–≤–æ—Ü–∏—Ä—É—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π. –†–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª–µ–Ω, –≤—Å–ø—ã–ª—å—á–∏–≤, —á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã, –Ω–µ—É–∂–∏–≤—á–∏–≤ –≤ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–µ. –û—Ç–º–µ—á–∞–µ—Ç—Å—è –Ω–∏–∑–∫–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—Å—Ç—å –≤ –æ–±—â–µ–Ω–∏–∏, –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ—Å—Ç—å –≤–µ—Ä–±–∞–ª—å–Ω—ã—Ö –∏ –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π, —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω–æ—Å—Ç—å –ø–æ—Å—Ç—É–ø–∫–æ–≤. –î–ª—è –Ω–µ–≥–æ –Ω–∏–∫–∞–∫–æ–π —Ç—Ä—É–¥ –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏—à—å –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –ø—Ä–æ—è–≤–ª—è–µ—Ç —Ç–∞–∫–æ–µ –∂–µ –Ω–µ–∂–µ–ª–∞–Ω–∏–µ —É—á–∏—Ç—å—Å—è. –†–∞–≤–Ω–æ–¥—É—à–µ–Ω –∫ –±—É–¥—É—â–µ–º—É, —Ü–µ–ª–∏–∫–æ–º –∂–∏–≤–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–º, –∂–µ–ª–∞—è –∏–∑–≤–ª–µ—á—å –∏–∑ –Ω–µ–≥–æ –º–∞—Å—Å—É —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π. –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –∏–º–ø—É–ª—å—Å–∏–≤–Ω–æ—Å—Ç—å –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—â–∞—è —Ä–µ–∞–∫—Ü–∏—è –≤–æ–∑–±—É–∂–¥–µ–Ω–∏—è –≥–∞—Å—è—Ç—Å—è —Å —Ç—Ä—É–¥–æ–º –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã –¥–ª—è –æ–∫—Ä—É–∂–∞—é—â–∏—Ö. –û–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–ª–∞—Å—Ç–Ω—ã–º, –≤—ã–±–∏—Ä–∞—è –¥–ª—è –æ–±—â–µ–Ω–∏—è –Ω–∞–∏–±–æ–ª–µ–µ —Å–ª–∞–±—ã—Ö.`,
        3: `–≠–º–æ—Ç–∏–≤–Ω—ã–π —Ç–∏–ø. –≠—Ç–æ—Ç —Ç–∏–ø —Ä–æ–¥—Å—Ç–≤–µ–Ω —ç–∫–∑–∞–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É, –Ω–æ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è –µ–≥–æ –Ω–µ —Å—Ç–æ–ª—å –±—É—Ä–Ω—ã. –î–ª—è –Ω–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å, –±–æ–ª—Ç–ª–∏–≤–æ—Å—Ç—å, –±–æ—è–∑–ª–∏–≤–æ—Å—Ç—å, –≥–ª—É–±–æ–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç–æ–Ω–∫–∏—Ö —á—É–≤—Å—Ç–≤. –ù–∞–∏–±–æ–ª–µ–µ —Å–∏–ª—å–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è –∏—Ö —á–µ—Ä—Ç–∞ ‚Äî –≥—É–º–∞–Ω–Ω–æ—Å—Ç—å, —Å–æ–ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏–º –ª—é–¥—è–º –∏–ª–∏ –∂–∏–≤–æ—Ç–Ω—ã–º, –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å, –º—è–≥–∫–æ—Å–µ—Ä–¥–µ—á–Ω–æ—Å—Ç—å, –æ–Ω–∏ —Ä–∞–¥—É—é—Ç—Å—è —á—É–∂–∏–º —É—Å–ø–µ—Ö–∞–º. –í–ø–µ—á–∞—Ç–ª–∏—Ç–µ–ª—å–Ω—ã, —Å–ª–µ–∑–ª–∏–≤—ã, –ª—é–±—ã–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—é—Ç —Å–µ—Ä—å–µ–∑–Ω–µ–µ, —á–µ–º –¥—Ä—É–≥–∏–µ –ª—é–¥–∏. –ü–æ–¥—Ä–æ—Å—Ç–∫–∏ –æ—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ —Å—Ü–µ–Ω—ã –∏–∑ —Ñ–∏–ª—å–º–æ–≤, –≥–¥–µ –∫–æ–º—É-–ª–∏–±–æ —É–≥—Ä–æ–∂–∞–µ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Å—Ü–µ–Ω–∞ –Ω–∞—Å–∏–ª–∏—è –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —É –Ω–∏—Ö —Å–∏–ª—å–Ω–æ–µ –ø–æ—Ç—Ä—è—Å–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–≥–æ –Ω–µ –∑–∞–±—É–¥–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å —Å–æ–Ω. –†–µ–¥–∫–æ –≤—Å—Ç—É–ø–∞—é—Ç –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –æ–±–∏–¥—ã –Ω–æ—Å—è—Ç –≤ —Å–µ–±–µ, –Ω–µ –≤—ã–ø–ª–µ—Å–∫–∏–≤–∞—è –∏—Ö –Ω–∞—Ä—É–∂—É. –ò–º —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ –æ–±–æ—Å—Ç—Ä–µ–Ω–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –¥–æ–ª–≥–∞, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ë–µ—Ä–µ–∂–Ω–æ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –ø—Ä–∏—Ä–æ–¥–µ, –ª—é–±—è—Ç –≤—ã—Ä–∞—â–∏–≤–∞—Ç—å —Ä–∞—Å—Ç–µ–Ω–∏—è, —É—Ö–∞–∂–∏–≤–∞—Ç—å –∑–∞ –∂–∏–≤–æ—Ç–Ω—ã–º–∏,`,
        4: `–ü–µ–¥–∞–Ω—Ç–∏—á–Ω—ã–π —Ç–∏–ø. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è —Ä–∏–≥–∏–¥–Ω–æ—Å—Ç—å—é, –∏–Ω–µ—Ä—Ç–Ω–æ—Å—Ç—å—é –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ç—è–∂–µ–ª–æ—Å—Ç—å—é –Ω–∞ –ø–æ–¥—ä–µ–º, –¥–æ–ª–≥–∏–º –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏–µ–º —Ç—Ä–∞–≤–º–∏—Ä—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π. –í –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤—Å—Ç—É–ø–∞–µ—Ç —Ä–µ–¥–∫–æ, –≤—ã—Å—Ç—É–ø–∞—è —Å–∫–æ—Ä–µ–µ –ø–∞—Å—Å–∏–≤–Ω–æ–π, —á–µ–º –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π. –í —Ç–æ –∂–µ –≤—Ä–µ–º—è –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ª—é–±–æ–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞. –ù–∞ —Å–ª—É–∂–±–µ –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ –±—é—Ä–æ–∫—Ä–∞—Ç, –ø—Ä–µ–¥—ä—è–≤–ª—è—è –æ–∫—Ä—É–∂–∞—é—â–∏–º –º–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π. –ü—É–Ω–∫—Ç—É–∞–ª–µ–Ω, –∞–∫–∫—É—Ä–∞—Ç–µ–Ω, –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª—è–µ—Ç —á–∏—Å—Ç–æ—Ç–µ –∏ –ø–æ—Ä—è–¥–∫—É, —Å–∫—Ä—É–ø—É–ª–µ–∑–µ–Ω, –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–µ–Ω, —Å–∫–ª–æ–Ω–µ–Ω –∂–µ—Å—Ç–∫–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–ª–∞–Ω—É, –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ—Ç–æ—Ä–æ–ø–ª–∏–≤, —É—Å–∏–¥—á–∏–≤, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã –∏ –æ—Å–æ–±—É—é –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç—å, —Å–∫–ª–æ–Ω–µ–Ω –∫ —á–∞—Å—Ç—ã–º —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞–º, —Å–æ–º–Ω–µ–Ω–∏—è–º –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã, –±—Ä—é–∑–∂–∞–Ω–∏—é, —Ñ–æ—Ä–º–∞–ª–∏–∑–º—É. –° –æ—Ö–æ—Ç–æ–π —É—Å—Ç—É–ø–∞–µ—Ç –ª–∏–¥–µ—Ä—Å—Ç–≤–æ –¥—Ä—É–≥–∏–º –ª—é–¥—è–º.`,
        5: `–¢—Ä–µ–≤–æ–∂–Ω—ã–π —Ç–∏–ø. –õ—é–¥—è–º –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω—ã –Ω–∏–∑–∫–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—Å—Ç—å, –º–∏–Ω–æ—Ä–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —Ä–æ–±–æ—Å—Ç—å, –ø—É–≥–ª–∏–≤–æ—Å—Ç—å, –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ. –î–µ—Ç–∏ —Ç—Ä–µ–≤–æ–∂–Ω–æ–≥–æ —Ç–∏–ø–∞ —á–∞—Å—Ç–æ –±–æ—è—Ç—Å—è —Ç–µ–º–Ω–æ—Ç—ã, –∂–∏–≤–æ—Ç–Ω—ã—Ö, —Å—Ç—Ä–∞—à–∞—Ç—Å—è –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –æ–¥–Ω–∏. –û–Ω–∏ —Å—Ç–æ—Ä–æ–Ω—è—Ç—Å—è —à—É–º–Ω—ã—Ö –∏ –±–æ–π–∫–∏—Ö —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤, –Ω–µ –ª—é–±—è—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ —à—É–º–Ω—ã—Ö –∏–≥—Ä, –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç —á—É–≤—Å—Ç–≤–æ —Ä–æ–±–æ—Å—Ç–∏ –∏ –∑–∞—Å—Ç–µ–Ω—á–∏–≤–æ—Å—Ç–∏, —Ç—è–∂–µ–ª–æ –ø–µ—Ä–µ–∂–∏–≤–∞—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ, —ç–∫–∑–∞–º–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä–∫–∏. –ß–∞—Å—Ç–æ —Å—Ç–µ—Å–Ω—è—é—Ç—Å—è –æ—Ç–≤–µ—á–∞—Ç—å –ø–µ—Ä–µ–¥ –∫–ª–∞—Å—Å–æ–º. –û—Ö–æ—Ç–Ω–æ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –æ–ø–µ–∫–µ —Å—Ç–∞—Ä—à–∏—Ö, –Ω–æ—Ç–∞—Ü–∏–∏ –≤–∑—Ä–æ—Å–ª—ã—Ö –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å —É –Ω–∏—Ö —É–≥—Ä—ã–∑–µ–Ω–∏—è —Å–æ–≤–µ—Å—Ç–∏, —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã, —Å–ª–µ–∑—ã, –æ—Ç—á–∞—è–Ω–∏–µ. –£ –Ω–∏—Ö —Ä–∞–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —á—É–≤—Å—Ç–≤–æ –¥–æ–ª–≥–∞, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –≤—ã—Å–æ–∫–∏–µ –º–æ—Ä–∞–ª—å–Ω—ã–µ –∏ —ç—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ß—É–≤—Å—Ç–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ç–∞—Ä–∞—é—Ç—Å—è –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–∞–º–æ—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ —Ç–µ –≤–∏–¥—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≥–¥–µ –æ–Ω–∏ –º–æ–≥—É—Ç –≤ –±–æ–ª—å—à–µ–π –º–µ—Ä–µ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–æ–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. `,
        6: `–¶–∏–∫–ª–æ—Ç–∏–º–Ω—ã–π —Ç–∏–ø. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è —Å–º–µ–Ω–æ–π –≥–∏–ø–µ—Ä—Ç–∏–º–Ω—ã—Ö –∏ –¥–∏—Å—Ç–∏–º–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ò–º —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω—ã —á–∞—Å—Ç—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Å–º–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π. –†–∞–¥–æ—Å—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤—ã–∑—ã–≤–∞—é—Ç —É –Ω–∏—Ö –∫–∞—Ä—Ç–∏–Ω—ã –≥–∏–ø–µ—Ä—Ç–∏–º–∏–∏: –∂–∞–∂–¥–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –≥–æ–≤–æ—Ä–ª–∏–≤–æ—Å—Ç—å, —Å–∫–∞—á–∫–∞ –∏–¥–µ–π; –ø–µ—á–∞–ª—å–Ω—ã–µ ‚Äî –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å, –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–π –∏ –º—ã—à–ª–µ–Ω–∏—è, —Ç–∞–∫ –∂–µ —á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –∏—Ö –º–∞–Ω–µ—Ä–∞ –æ–±—â–µ–Ω–∏—è —Å –æ–∫—Ä—É–∂–∞—é—â–∏–º–∏ –ª—é–¥—å–º–∏. –í –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ –º–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ü–∏–∫–ª–æ—Ç–∏–º–∏—á–µ—Å–∫–æ–π –∞–∫—Ü–µ–Ω—Ç—É–∞—Ü–∏–∏: —Ç–∏–ø–∏—á–Ω—ã–µ –∏ –ª–∞–±–∏–ª—å–Ω—ã–µ —Ü–∏–∫–ª–æ–∏–¥—ã. –¢–∏–ø–∏—á–Ω—ã–µ —Ü–∏–∫–ª–æ–∏–¥—ã –≤ –¥–µ—Ç—Å—Ç–≤–µ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ –≥–∏–ø–µ—Ä—Ç–∏–º–Ω—ã—Ö, –Ω–æ –∑–∞—Ç–µ–º –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤—è–ª–æ—Å—Ç—å, —É–ø–∞–¥–æ–∫ —Å–∏–ª, —Ç–æ —á—Ç–æ —Ä–∞–Ω—å—à–µ –¥–∞–≤–∞–ª –æ—Å—å –ª–µ–≥–∫–æ, —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–ø–æ–º–µ—Ä–Ω—ã—Ö —É—Å–∏–ª–∏–π. –ü—Ä–µ–∂–¥–µ —à—É–º–Ω—ã–µ –∏ –±–æ–π–∫–∏–µ, –æ–Ω–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤—è–ª—ã–º–∏ –¥–æ–º–æ—Å–µ–¥–∞–º–∏, –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –ø–∞–¥–µ–Ω–∏–µ –∞–ø–ø–µ—Ç–∏—Ç–∞, –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ –∏–ª–∏ —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å. –ù–∞ –∑–∞–º–µ—á–∞–Ω–∏—è —Ä–µ–∞–≥–∏—Ä—É—é—Ç —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ–º, –¥–∞–∂–µ –≥—Ä—É–±–æ—Å—Ç—å—é –∏ –≥–Ω–µ–≤–æ–º, –≤ –≥–ª—É–±–∏–Ω–µ –¥—É—à–∏, –æ–¥–Ω–∞–∫–æ, –≤–ø–∞–¥–∞—è –ø—Ä–∏ —ç—Ç–æ–º –≤ —É–Ω—ã–Ω–∏–µ, –≥–ª—É–±–æ–∫—É—é –¥–µ–ø—Ä–µ—Å—Å–∏—é, –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω—ã —Å—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏.`,
        7: `–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π —Ç–∏–ø. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –∫ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—é, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é –ø–æ–≤–µ–¥–µ–Ω–∏—è, –∂–∏–≤–æ—Å—Ç—å—é, –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å—é, –ª–µ–≥–∫–æ—Å—Ç—å—é –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤. –°–∫–ª–æ–Ω–µ–Ω –∫ —Ñ–∞–Ω—Ç–∞–∑–µ—Ä—Å—Ç–≤—É, –ª–∂–∏–≤–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Ç–≤–æ—Ä—Å—Ç–≤—É, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –Ω–∞ –ø—Ä–∏—É–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ —Å–≤–æ–µ–π –ø–µ—Ä—Å–æ–Ω—ã, –∫ –∞–≤–∞–Ω—Ç—é—Ä–∏–∑–º—É, –∞—Ä—Ç–∏—Å—Ç–∏–∑–º—É, –ø–æ–∑–µ—Ä—Å—Ç–≤—É. –ò–º –¥–≤–∏–∂–µ—Ç —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –ª–∏–¥–µ—Ä—Å—Ç–≤—É, –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–∑–Ω–∞–Ω–∏–∏, –∂–∞–∂–¥–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∫ —Å–≤–æ–µ–π –ø–µ—Ä—Å–æ–Ω–µ, –∂–∞–∂–¥–∞ –≤–ª–∞—Å—Ç–∏, –ø–æ—Ö–≤–∞–ª—ã; –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞ –±—ã—Ç—å –Ω–µ–∑–∞–º–µ—á–µ–Ω–Ω—ã–º –æ—Ç—è–≥–æ—â–∞–µ—Ç –µ–≥–æ. –û–Ω –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–∏—Å–ø–æ—Å–∞–±–ª–∏–≤–∞–µ–º–æ—Å—Ç—å –∫ –ª—é–¥—è–º, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ª–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (–ª–µ–≥–∫—É—é —Å–º–µ–Ω—É –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π) –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≥–ª—É–±–æ–∫–∏—Ö —á—É–≤—Å—Ç–≤, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç—Ä–∏–≥–∞–º (–ø—Ä–∏ –≤–Ω–µ—à–Ω–µ–π –º—è–≥–∫–æ—Å—Ç–∏ –º–∞–Ω–µ—Ä—ã –æ–±—â–µ–Ω–∏—è). –û—Ç–º–µ—á–∞–µ—Ç—Å—è –±–µ—Å–ø—Ä–µ–¥–µ–ª—å–Ω—ã–π —ç–≥–æ—Ü–µ–Ω—Ç—Ä–∏–∑–º, –∂–∞–∂–¥–∞ –≤–æ—Å—Ö–∏—â–µ–Ω–∏—è, —Å–æ—á—É–≤—Å—Ç–≤–∏—è, –ø–æ—á–∏—Ç–∞–Ω–∏—è, —É–¥–∏–≤–ª–µ–Ω–∏—è. –û–±—ã—á–Ω–æ –ø–æ—Ö–≤–∞–ª–∞ –¥—Ä—É–≥–∏—Ö –≤ –µ–≥–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç —É –Ω–µ–≥–æ –æ—Å–æ–±–æ –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è, –æ–Ω —ç—Ç–æ–≥–æ –Ω–µ –≤—ã–Ω–æ—Å–∏—Ç. –°—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –æ–±—ã—á–Ω–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å—é –æ—â—É—Ç–∏—Ç—å —Å–µ–±—è –ª–∏–¥–µ—Ä–æ–º, –∑–∞–Ω—è—Ç—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ.`,
        8: `–ó–∞—Å—Ç—Ä–µ–≤–∞—é—â–∏–π —Ç–∏–ø. –ï–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç —É–º–µ—Ä–µ–Ω–Ω–∞—è –æ–±—â–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∑–∞–Ω—É–¥—Å—Ç–≤–æ, —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –Ω—Ä–∞–≤–æ—É—á–µ–Ω–∏—è–º, –Ω–µ—Ä–∞–∑–≥–æ–≤–æ—Ä—á–∏–≤–æ—Å—Ç—å. –ß–∞—Å—Ç–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –º–Ω–∏–º–æ–π –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –Ω–µ–º—É. –í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º –ø—Ä–æ—è–≤–ª—è–µ—Ç –Ω–∞—Å—Ç–æ—Ä–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ –Ω–µ–¥–æ–≤–µ—Ä—á–∏–≤–æ—Å—Ç—å –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –ª—é–¥—è–º, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ –æ–±–∏–¥–∞–º –∏ –æ–≥–æ—Ä—á–µ–Ω–∏—è–º, —É—è–∑–≤–∏–º, –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª–µ–Ω, –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –º—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –¥–æ–ª–≥–æ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–∏—Å—à–µ–¥—à–µ–µ, –Ω–µ —Å–ø–æ—Å–æ–±–µ–Ω –ª–µ–≥–∫–æ –æ—Ç—Ö–æ–¥–∏—Ç—å –æ—Ç –æ–±–∏–¥. –î–ª—è –Ω–µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–∞ –∑–∞–Ω–æ—Å—á–∏–≤–æ—Å—Ç—å, —á–∞—Å—Ç–æ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤. –°–∞–º–æ–Ω–∞–¥–µ—è–Ω–Ω–æ—Å—Ç—å, –∂–µ—Å—Ç–∫–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –∏ –≤–∑–≥–ª—è–¥–æ–≤, —Å–∏–ª—å–Ω–æ —Ä–∞–∑–≤–∏—Ç–æ–µ —á–µ—Å—Ç–æ–ª—é–±–∏–µ —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ–º—É —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é —Å–≤–æ–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –æ—Ç—Å—Ç–∞–∏–≤–∞–µ—Ç —Å –æ—Å–æ–±–æ–π —ç–Ω–µ—Ä–≥–∏—á–Ω–æ—Å—Ç—å—é. –°—Ç—Ä–µ–º–∏—Ç—Å—è –¥–æ–±–∏—Ç—å—Å—è –≤—ã—Å–æ–∫–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –≤ –ª—é–±–æ–º –¥–µ–ª–µ, –∑–∞ –∫–æ—Ç–æ—Ä–æ–µ –±–µ—Ä–µ—Ç—Å—è, –∏ –ø—Ä–æ—è–≤–ª—è–µ—Ç –±–æ–ª—å—à–æ–µ —É–ø–æ—Ä—Å—Ç–≤–æ –≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å–≤–æ–∏—Ö —Ü–µ–ª–µ–π. –û—Å–Ω–æ–≤–Ω–æ–π —á–µ—Ä—Ç–æ–π —è–≤–ª—è–µ—Ç—Å—è —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç—å –∫ –∞—Ñ—Ñ–µ–∫—Ç–∞–º (–ø—Ä–∞–≤–¥–æ–ª—é–±–∏–µ, –æ–±–∏–¥—á–∏–≤–æ—Å—Ç—å, —Ä–µ–≤–Ω–æ—Å—Ç—å, –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å), –∏–Ω–µ—Ä—Ç–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–∏ –∞—Ñ—Ñ–µ–∫—Ç–æ–≤, –≤ –º—ã—à–ª–µ–Ω–∏–∏, –≤ –º–æ—Ç–æ—Ä–∏–∫–µ.`,
        9: `–î–∏—Å—Ç–∏–º–∏—á–µ—Å–∫–∏–π —Ç–∏–ø. –õ—é–¥–∏ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å—é, –¥–∞–∂–µ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, –º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å–ª–∞–±–æ—Å—Ç—å—é –≤–æ–ª–µ–≤—ã—Ö —É—Å–∏–ª–∏–π. –î–ª—è –Ω–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã –ø–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –±—É–¥—É—â–µ–º—É, –∑–∞–Ω–∏–∂–µ–Ω–Ω–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞, –∞ —Ç–∞–∫–∂–µ –Ω–∏–∑–∫–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—Å—Ç—å, –Ω–µ–º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω–æ—Å—Ç—å –≤ –±–µ—Å–µ–¥–µ, –¥–∞–∂–µ –º–æ–ª—á–∞–ª–∏–≤–æ—Å—Ç—å. –¢–∞–∫–∏–µ –ª—é–¥–∏ —è–≤–ª—è—é—Ç—Å—è –¥–æ–º–æ—Å–µ–¥–∞–º–∏, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏—Å—Ç–∞–º–∏; –æ–±—â–µ—Å—Ç–≤–∞, —à—É–º–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –æ–±—ã—á–Ω–æ –∏–∑–±–µ–≥–∞—é—Ç, –≤–µ–¥—É—Ç –∑–∞–º–∫–Ω—É—Ç—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏. –ß–∞—Å—Ç–æ —É–≥—Ä—é–º—ã, –∑–∞—Ç–æ—Ä–º–æ–∂–µ–Ω–Ω—ã, —Å–∫–ª–æ–Ω–Ω—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–Ω–µ–≤—ã—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö –∂–∏–∑–Ω–∏. –û–Ω–∏ –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã, —Ü–µ–Ω—è—Ç —Ç–µ—Ö, –∫—Ç–æ —Å –Ω–∏–º–∏ –¥—Ä—É–∂–∏—Ç, –∏ –≥–æ—Ç–æ–≤—ã –∏–º –ø–æ–¥—á–∏–Ω–∏—Ç—å—Å—è, —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç –æ–±–æ—Å—Ç—Ä–µ–Ω–Ω—ã–º —á—É–≤—Å—Ç–≤–æ–º —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ—Å—Ç—å—é –º—ã—à–ª–µ–Ω–∏—è.`,
        10: `–≠–∫–∑–∞–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∏–ø. –Ø—Ä–∫–∞—è —á–µ—Ä—Ç–∞ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ ‚Äî —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–æ—Å—Ç–æ—Ä–≥–∞—Ç—å—Å—è, –≤–æ—Å—Ö–∏—â–∞—Ç—å—Å—è, –∞ —Ç–∞–∫–∂–µ —É–ª—ã–±—á–∏–≤–æ—Å—Ç—ä, –æ—â—É—â–µ–Ω–∏–µ —Å—á–∞—Å—Ç—å—è, —Ä–∞–¥–æ—Å—Ç–∏, –Ω–∞—Å–ª–∞–∂–¥–µ–Ω–∏—è. –≠—Ç–∏ —á—É–≤—Å—Ç–≤–∞ —É –Ω–∏—Ö –º–æ–≥—É—Ç —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø–æ –ø—Ä–∏—á–∏–Ω–µ, –∫–æ—Ç–æ—Ä–∞—è —É –¥—Ä—É–≥–∏—Ö –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –±–æ–ª—å—à–æ–≥–æ –ø–æ–¥—ä–µ–º–∞, –æ–Ω–∏ –ª–µ–≥–∫–æ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –≤–æ—Å—Ç–æ—Ä–≥ –æ—Ç —Ä–∞–¥–æ—Å—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∏ –≤ –ø–æ–ª–Ω–æ–µ –æ—Ç—á–∞—è–Ω–∏–µ ‚Äî –æ—Ç –ø–µ—á–∞–ª—å–Ω—ã—Ö. –ò–º —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–∞ –≤—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—Å—Ç—å, —Å–ª–æ–≤–æ–æ—Ö–æ—Ç–ª–∏–≤–æ—Å—Ç—å, –≤–ª—é–±—á–∏–≤–æ—Å—Ç—å. –¢–∞–∫–∏–µ –ª—é–¥–∏ —á–∞—Å—Ç–æ —Å–ø–æ—Ä—è—Ç, –Ω–æ –Ω–µ –¥–æ–≤–æ–¥—è—Ç –¥–µ–ª–∞ –¥–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤. –í –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –æ–Ω–∏ –±—ã–≤–∞—é—Ç –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω–æ–π, —Ç–∞–∫ –∏ –ø–∞—Å—Å–∏–≤–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π. –û–Ω–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –¥—Ä—É–∑—å—è–º –∏ –±–ª–∏–∑–∫–∏–º, –∞–ª—å—Ç—Ä—É–∏—Å—Ç–∏—á–Ω—ã, –∏–º–µ—é—Ç —á—É–≤—Å—Ç–≤–æ —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è, —Ö–æ—Ä–æ—à–∏–π –≤–∫—É—Å, –ø—Ä–æ—è–≤–ª—è—é—Ç —è—Ä–∫–æ—Å—Ç—å –∏ –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å —á—É–≤—Å—Ç–≤. –ú–æ–≥—É—Ç –±—ã—Ç—å –ø–∞–Ω–∏–∫–µ—Ä–∞–º–∏, –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã —Å–∏—é–º–∏–Ω—É—Ç–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è–º, –ø–æ—Ä—ã–≤–∏—Å—Ç—ã, –ª–µ–≥–∫–æ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–æ—Å—Ç–æ—Ä–≥–∞ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –ø–µ—á–∞–ª–∏, –æ–±–ª–∞–¥–∞—é—Ç –ª–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é –ø—Å–∏—Ö–∏–∫–∏.`
    };

    let message = 'üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ª–∏—á–Ω–æ—Å—Ç–∏\n\n';
    
    if (dominantScales.length === 0) {
        message += '–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ —è—Ä–∫–æ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã—Ö –∞–∫—Ü–µ–Ω—Ç—É–∞—Ü–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞.';
    } else if (dominantScales.length === 1) {
        message += descriptions[dominantScales[0]];
    } else {
        message += '–£ –≤–∞—Å –≤—ã—Ä–∞–∂–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∞–∫—Ü–µ–Ω—Ç—É–∞—Ü–∏–π:\n\n';
        dominantScales.forEach(scale => {
            message += descriptions[scale] + '\n\n';
        });
    }
    
    return message;
}

function getTest2Description(results) {
    const typeDescriptions = {
        visual: {
            title: 'üëÅ –í–ò–ó–£–ê–õ',
            description: `–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É —Ç–∏–ø—É –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è. 

–ß–∞—Å—Ç–æ —É–ø–æ—Ç—Ä–µ–±–ª—è—é—Ç—Å—è —Å–ª–æ–≤–∞ –∏ —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–≤—è–∑–∞–Ω—ã —Å–æ –∑—Ä–µ–Ω–∏–µ–º, —Å –æ–±—Ä–∞–∑–∞–º–∏ –∏
–≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º. –ù–∞–ø—Ä–∏–º–µ—Ä: ‚Äú–Ω–µ –≤–∏–¥–µ–ª —ç—Ç–æ–≥–æ‚Äù, ‚Äú–∑–∞–º–µ—Ç–∏–ª
–ø—Ä–µ–∫—Ä–∞—Å–Ω—É—é –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å‚Äù. –†–∏—Å—É–Ω–∫–∏, –æ–±—Ä–∞–∑–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∑–Ω–∞—á–∞—Ç –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
–±–æ–ª—å—à–µ, —á–µ–º —Å–ª–æ–≤–∞. –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–µ –∫ —ç—Ç–æ–º—É —Ç–∏–ø—É –ª—é–¥–∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Å—Ö–≤–∞—Ç—ã–≤–∞—é—Ç —Ç–æ, —á—Ç–æ
–º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å: —Ü–≤–µ—Ç–∞, –≥–∞—Ä–º–æ–Ω–∏—é –∏ –±–µ—Å–ø–æ—Ä—è–¥–æ–∫.

–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
–ü–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∑—Ä–µ–Ω–∏—è ‚Äì –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞–≥–ª—è–¥–Ω—ã—Ö –ø–æ—Å–æ–±–∏–π –∏–ª–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ
–Ω–∞–±–ª—é–¥–∞—è –∑–∞ —Ç–µ–º, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –í–æ—Å–ø—Ä–∏—è—Ç–∏–µ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ
–º–∏—Ä–∞ –í–æ—Å–ø—Ä–∏–∏–º—á–∏–≤—ã –∫ –≤–∏–¥–∏–º–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –º–∏—Ä–∞; –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç –∂–≥—É—á—É—é
–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ–±—ã –º–∏—Ä –≤–æ–∫—Ä—É–≥ –Ω–∏—Ö –≤—ã–≥–ª—è–¥–µ–ª –∫—Ä–∞—Å–∏–≤–æ; –ª–µ–≥–∫–æ –æ—Ç–≤–ª–µ–∫–∞—é—Ç—Å—è –∏ –≤–ø–∞–¥–∞—é—Ç –≤
–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –ø—Ä–∏ –≤–∏–¥–µ –±–µ—Å–ø–æ—Ä—è–¥–∫–∞.
–†–µ—á—å:
–û–ø–∏—Å—ã–≤–∞—é—Ç –≤–∏–¥–∏–º—ã–µ –¥–µ—Ç–∞–ª–∏ –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∏ ‚Äì —Ü–≤–µ—Ç, —Ñ–æ—Ä–º—É, —Ä–∞–∑–º–µ—Ä –∏ –≤–Ω–µ—à–Ω–∏–π –æ–±–ª–∏–∫ –≤–µ—â–µ–π
–î–≤–∏–∂–µ–Ω–∏—è –≥–ª–∞–∑:
–ö–æ–≥–¥–∞ –æ —á–µ–º-–Ω–∏–±—É–¥—å —Ä–∞–∑–º—ã—à–ª—è—é—Ç, –æ–±—ã—á–Ω–æ —Å–º–æ—Ç—Ä—è—Ç –≤ –ø–æ—Ç–æ–ª–æ–∫; –∫–æ–≥–¥–∞ —Å–ª—É—à–∞—é—Ç, –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç
–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –≥–ª–∞–∑–∞ –≥–æ–≤–æ—Ä—è—â–µ–º—É –∏ —Ö–æ—Ç—è—Ç, —á—Ç–æ–±—ã —Ç–µ, –∫—Ç–æ –∏—Ö —Å–ª—É—à–∞—é—Ç, —Ç–∞–∫–∂–µ —Å–º–æ—Ç—Ä–µ–ª–∏
–∏–º –≤ –≥–ª–∞–∑–∞.
–ü–∞–º—è—Ç—å.:
–•–æ—Ä–æ—à–æ –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç –∑—Ä–∏–º—ã–µ –¥–µ—Ç–∞–ª–∏ –æ–±—Å—Ç–∞–Ω–æ–≤–∫–∏, –∞ —Ç–∞–∫–∂–µ —Ç–µ–∫—Å—Ç—ã –∏ —É—á–µ–±–Ω—ã–µ –ø–æ—Å–æ–±–∏—è,
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –ø–µ—á–∞—Ç–Ω–æ–º –∏–ª–∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –≤–∏–¥–µ.`
        },
        audial: {
            title: 'üëÇ –ê–£–î–ò–ê–õ',
            description: `–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –∞—É–¥–∏–∞–ª—å–Ω–æ–º—É —Ç–∏–ø—É –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.

‚Äú–ù–µ –ø–æ–Ω–∏–º–∞—é —á—Ç–æ –º–Ω–µ –≥–æ–≤–æ—Ä–∏—à—å‚Äù, ‚Äú—ç—Ç–æ –∏–∑–≤–µ—Å—Ç–∏–µ –¥–ª—è –º–µ–Ω—è‚Ä¶‚Äù, ‚Äú–Ω–µ –≤—ã–Ω–æ—à—É —Ç–∞–∫–∏—Ö
–≥—Ä–æ–º–∫–∏—Ö –º–µ–ª–æ–¥–∏–π‚Äù ‚Äì –≤–æ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è –¥–ª—è –ª—é–¥–µ–π —ç—Ç–æ–≥–æ —Ç–∏–ø–∞; –æ–≥—Ä–æ–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
–¥–ª—è –Ω–∏—Ö –∏–º–µ–µ—Ç –≤—Å–µ, —á—Ç–æ –∞–∫—É—Å—Ç–∏—á–Ω–æ: –∑–≤—É–∫–∏, —Å–ª–æ–≤–∞, –º—É–∑—ã–∫–∞, —à—É–º–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã.

–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
–ü–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Å–ª—É—Ö–∞ ‚Äì –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞, —á—Ç–µ–Ω–∏—è –≤—Å–ª—É—Ö, —Å–ø–æ—Ä–∞ –∏–ª–∏ –æ–±–º–µ–Ω–∞ –º–Ω–µ–Ω–∏—è–º–∏ —Å–æ
—Å–≤–æ–∏–º–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞–º–∏.
–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –º–∏—Ä–∞.
–ò—Å–ø—ã—Ç—ã–≤–∞—é—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Å–ª—É—Ö–æ–≤–æ–π —Å—Ç–∏–º—É–ª—è—Ü–∏–∏, –∞ –∫–æ–≥–¥–∞ –≤–æ–∫—Ä—É–≥ —Ç–∏—Ö–æ,
–Ω–∞—á–∏–Ω–∞—é—Ç –∏–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∑–≤—É–∫–∏ ‚Äì –º—É—Ä–ª—ã—á—É—Ç —Å–µ–±–µ –ø–æ–¥ –Ω–æ—Å, —Å–≤–∏—Å—Ç—è—Ç –∏–ª–∏ —Å–∞–º–∏ —Å —Å–æ–±–æ–π
—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—é—Ç, –Ω–æ —Ç–æ–ª—å–∫–æ –Ω–µ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –æ–Ω–∏ –∑–∞–Ω—è—Ç—ã —É—á–µ–±–æ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —ç—Ç–∏ –º–∏–Ω—É—Ç—ã –∏–º
–Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ —Ç–∏—à–∏–Ω–∞; –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∏–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è –æ—Ç —Ä–∞–∑–¥—Ä–∞–∂–∞—é—â–µ–≥–æ
—à—É–º–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π.
–†–µ—á—å:
–û–ø–∏—Å—ã–≤–∞—é—Ç –∑–≤—É–∫–∏ –∏ –≥–æ–ª–æ—Å–∞, –º—É–∑—ã–∫—É, –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ —à—É–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É—Å–ª—ã—à–∞—Ç—å –≤
–æ–∫—Ä—É–∂–∞—é—â–µ–π –∏—Ö –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ—Å–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ, —á—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –¥—Ä—É–≥–∏–µ –ª—é–¥–∏.
–î–≤–∏–∂–µ–Ω–∏—è –≥–ª–∞–∑: –û–±—ã—á–Ω–æ —Å–º–æ—Ç—Ä—è—Ç —Ç–æ –≤–ª–µ–≤–æ, —Ç–æ –≤–ø—Ä–∞–≤–æ –∏ –ª–∏—à—å –∏–∑—Ä–µ–¥–∫–∞ –∏ –Ω–µ–Ω–∞–¥–æ–ª–≥–æ
–∑–∞–≥–ª—è–¥—ã–≤–∞—é—Ç –≤ –≥–ª–∞–∑–∞ –≥–æ–≤–æ—Ä—è—â–µ–º—É.
–ü–∞–º—è—Ç—å:
–•–æ—Ä–æ—à–æ –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä—ã, –º—É–∑—ã–∫—É –∏ –∑–≤—É–∫–∏.`
        },
        kinesthetic: {
            title: '‚úã –ö–ò–ù–ï–°–¢–ï–¢–ò–ö',
            description: `–í—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –∫–∏–Ω–µ—Å—Ç–µ—Ç–∏—á–µ—Å–∫–æ–º—É —Ç–∏–ø—É –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.

–¢—É—Ç —á–∞—â–µ –≤ —Ö–æ–¥—É –¥—Ä—É–≥–∏–µ —Å–ª–æ–≤–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä: ‚Äú–Ω–µ –º–æ–≥—É —ç—Ç–æ–≥–æ –ø–æ–Ω—è—Ç—å‚Äù,
‚Äú–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ –Ω–µ–≤—ã–Ω–æ—Å–∏–º–∞—è‚Äù. –ß—É–≤—Å—Ç–≤–∞ –∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –ª—é–¥–µ–π —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –∫–∞—Å–∞—é—Ç—Å—è,
–≥–ª–∞–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, —Ç–æ–≥–æ, —á—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—é, –∏–Ω—Ç—É–∏—Ü–∏–∏. –í —Ä–∞–∑–≥–æ–≤–æ—Ä–µ –∏—Ö
–∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è.

–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
–ü–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π —Å–∫–µ–ª–µ—Ç–Ω—ã—Ö –º—ã—à—Ü ‚Äì —É—á–∞—Å—Ç–≤—É—è –≤ –ø–æ–¥–≤–∏–∂–Ω—ã—Ö –∏–≥—Ä–∞—Ö –∏
–∑–∞–Ω—è—Ç–∏—è—Ö, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É—è, –∏—Å—Å–ª–µ–¥—É—è –æ–∫—Ä—É–∂–∞—é—â–∏–π –º–∏—Ä, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ —Ç–µ–ª–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–≤–∏–∂–µ–Ω–∏–∏.
–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –º–∏—Ä–∞:
–ü—Ä–∏–≤—ã–∫–ª–∏ –∫ —Ç–æ–º—É, —á—Ç–æ –≤–æ–∫—Ä—É–≥ –Ω–∏—Ö –∫–∏–ø–∏—Ç –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å; –∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º –ø—Ä–æ—Å—Ç–æ—Ä –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è;
–∏—Ö –≤–Ω–∏–º–∞–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–∫–æ–≤–∞–Ω–æ –∫ –¥–≤–∏–∂—É—â–∏–º—Å—è –æ–±—ä–µ–∫—Ç–∞–º; –∑–∞—á–∞—Å—Ç—É—é –∏—Ö –æ—Ç–≤–ª–µ–∫–∞–µ—Ç –∏ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç,
–∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –ª—é–¥–∏ –Ω–µ –º–æ–≥—É—Ç —É—Å–∏–¥–µ—Ç—å –Ω–∞ –º–µ—Å—Ç–µ, –æ–¥–Ω–∞–∫–æ –∏–º —Å–∞–º–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
–¥–≤–∏–≥–∞—Ç—å—Å—è –Ω–∞ —á—Ç–æ –æ–±—Ä–∞—â–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏ –æ–±—â–µ–Ω–∏–∏ —Å –ª—é–¥—å–º–∏ –Ω–∞ —Ç–æ, –∫–∞–∫ –¥—Ä—É–≥–æ–π —Å–µ–±—è –≤–µ–¥–µ—Ç;
—á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç –∏ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è.
–†–µ—á—å:
–®–∏—Ä–æ–∫–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç —Å–ª–æ–≤–∞, –æ–±–æ–∑–Ω–∞—á–∞—é—â–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏—è; –≥–æ–≤–æ—Ä—è—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ –¥–µ–ª–∞—Ö,
–ø–æ–±–µ–¥–∞—Ö –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö; —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ —Å–≤–æ–µ —Ç–µ–ª–æ, –∂–µ—Å—Ç—ã.
–î–≤–∏–∂–µ–Ω–∏—è –≥–ª–∞–∑:
–ò–º —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ —Å–ª—É—à–∞—Ç—å –∏ —Ä–∞–∑–º—ã—à–ª—è—Ç—å, –∫–æ–≥–¥–∞ –∏—Ö –≥–ª–∞–∑–∞ –æ–ø—É—â–µ–Ω—ã –≤–Ω–∏–∑ –∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É; –æ–Ω–∏
–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Å–º–æ—Ç—Ä—è—Ç –≤ –≥–ª–∞–∑–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É, –ø–æ—Å–∫–æ–ª—å–∫—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≥–ª–∞–∑
–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º —É—á–∏—Ç—å—Å—è –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å
–ü–∞–º—è—Ç—å:
–•–æ—Ä–æ—à–æ –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç —Å–≤–æ–∏ –∏ —á—É–∂–∏–µ –ø–æ—Å—Ç—É–ø–∫–∏, –¥–≤–∏–∂–µ–Ω–∏—è –∏ –∂–µ—Å—Ç—ã.`
        }
    };

    let message = 'üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Ç–∏–ø–∞ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è\n\n';
    const maxScore = Math.max(...Object.values(results));
    const dominantTypes = Object.entries(results)
        .filter(([_, score]) => score === maxScore)
        .map(([type, _]) => type);

    dominantTypes.forEach(type => {
        message += `${typeDescriptions[type].title}\n${typeDescriptions[type].description}\n\n`;
    });

    return message;
}

function getTest3Description(anxietyScore, depressionScore) {
    function getLevel(score) {
        if (score <= 7) return '¬´–Ω–æ—Ä–º–∞¬ª (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–æ–≤ —Ç—Ä–µ–≤–æ–≥–∏ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏';
        if (score <= 10) return '¬´—Å—É–±–∫–ª–∏–Ω–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞ / –¥–µ–ø—Ä–µ—Å—Å–∏—è¬ª';
        return '¬´–∫–ª–∏–Ω–∏—á–µ—Å–∫–∏ –≤—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞ / –¥–µ–ø—Ä–µ—Å—Å–∏—è¬ª';
    }

    let message = 'üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ü–µ–Ω–∫–∏ —Ç—Ä–µ–≤–æ–≥–∏ –∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏\n\n';

    message += `üî∑ –£—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–≥–∏: ${anxietyScore} –±–∞–ª–ª–æ–≤\n`;
    message += `–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: ${getLevel(anxietyScore)} —Ç—Ä–µ–≤–æ–≥–∞\n\n`;

    message += `üî∂ –£—Ä–æ–≤–µ–Ω—å –¥–µ–ø—Ä–µ—Å—Å–∏–∏: ${depressionScore} –±–∞–ª–ª–æ–≤\n`;
    message += `–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è: ${getLevel(depressionScore)} –¥–µ–ø—Ä–µ—Å—Å–∏—è\n\n`;

    return message;
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
bot.onText(/\/start/, async (msg) => {
    const chatId = msg.chat.id;
    
    const existingUser = await checkExistingUser(chatId);
    if (existingUser) {
        await clearUserData(chatId);
    }

    let keyboard = [
        [{ text: '–ù–∞—á–∞—Ç—å', callback_data: 'start_test' }]
    ];

    if (isAdmin(chatId)) {
        keyboard.push([{ text: '–ë–∞–∑–∞', callback_data: 'export_database' }]);
    }

    const message = await bot.sendMessage(chatId, 
        `–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –±–æ—Ä—å–±–µ —Å —Ç—Ä–µ–≤–æ–≥–æ–π, —Å—Ç—Ä–µ—Å—Å–æ–º –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º.

–° –º–æ–µ–π –ø–æ–º–æ—â—å—é –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã, —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —Å–≤–æ–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏. –í–æ—Ç, —á—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –≤–∞—Å:
‚Ä¢ –°–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π, —Å—Ç—Ä–µ—Å—Å–æ–º –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º.
‚Ä¢ –û–±–ª–µ–≥—á–∏—Ç—å —Å–∏–º–ø—Ç–æ–º—ã —Å–∏–Ω–¥—Ä–æ–º–∞ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–Ω–æ–≥–æ –∫–∏—à–µ—á–Ω–∏–∫–∞ (–°–†–ö).
‚Ä¢ –£–ª—É—á—à–∏—Ç—å –≤–∞—à–µ –æ–±—â–µ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –∏ –≤–µ—Ä–Ω—É—Ç—å —á—É–≤—Å—Ç–≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è.

–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ?
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∞—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.
‚Ä¢ –ü—Ä–æ—Å—Ç—ã–µ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ –≤–∫–ª—é—á–∏—Ç—å –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å.
‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.
–ì–æ—Ç–æ–≤—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å? –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!`, {
        reply_markup: {
            inline_keyboard: keyboard
        }
    });

    await saveResponse(chatId, { 
        message_id: message.message_id,
        current_test: 'start',
        stage: 'start'
    });
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
bot.on('message', async (msg) => {
    if (!msg.text || msg.text.startsWith('/')) return;

    const chatId = msg.chat.id;
    const text = msg.text;
    
    try {
        const userStage = await getUserStage(chatId);
        const prevMessageId = await getLastMessageId(chatId);

        if (prevMessageId) {
            await bot.deleteMessage(chatId, prevMessageId).catch(() => {});
        }

        switch (userStage) {
            case 'full_name':
                if (isValidFullName(text)) {
                    const message = await bot.sendMessage(chatId, '–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç?');
                    await saveResponse(chatId, { 
                        full_name: text, 
                        stage: 'age',
                        message_id: message.message_id 
                    });
                } else {
                    const message = await bot.sendMessage(chatId, 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –§–ò–û (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á).');
                    await saveResponse(chatId, { message_id: message.message_id });
                }
                break;

            case 'age':
                const age = parseInt(text, 10);
                if (isValidAge(age)) {
                    const message = await bot.sendMessage(chatId, '–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª:', {
                        reply_markup: {
                            inline_keyboard: [
                                [
                                    { text: '–ú—É–∂—Å–∫–æ–π', callback_data: 'male' },
                                    { text: '–ñ–µ–Ω—Å–∫–∏–π', callback_data: 'female' }
                                ]
                            ]
                        }
                    });
                    await saveResponse(chatId, { 
                        age, 
                        stage: 'gender',
                        message_id: message.message_id 
                    });
                } else {
                    const message = await bot.sendMessage(chatId, 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (1-120 –ª–µ—Ç).');
                    await saveResponse(chatId, { message_id: message.message_id });
                }
                break;

            case 'meds_details':
                const userGender = await getUserGender(chatId);
                await saveResponse(chatId, { meds_details: text });

                if (userGender === 'female') {
                    const message = await bot.sendMessage(chatId, '–í—ã –±–µ—Ä–µ–º–µ–Ω–Ω—ã?', {
                        reply_markup: {
                            inline_keyboard: [
                                [{ text: '–î–∞', callback_data: 'pregnant_yes' }],
                                [{ text: '–ù–µ—Ç', callback_data: 'pregnant_no' }]
                            ]
                        }
                    });
                    await saveResponse(chatId, { 
                        stage: 'pregnant',
                        message_id: message.message_id 
                    });
                } else {
                    await startTest(chatId);
                }
                break;

            default:
                await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—á–Ω–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ /start');
                break;
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
        await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
    }
});

const reminders = new Map();

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è scheduleReminder
function scheduleReminder(chatId) {
    try {
        if (reminders.has(chatId)) {
            reminders.get(chatId).cancel(); // –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
        }

        const job = schedule.scheduleJob(new Date(Date.now() + 2 * 24 * 60 * 60 * 1000), async () => {
            try {
                const options = {
                    reply_markup: {
                        inline_keyboard: [
                            [
                                { text: '–°–µ–π—á–∞—Å –Ω–µ –≥–æ—Ç–æ–≤(–∞)', callback_data: `not_ready_${chatId}` },
                                { text: '–î–∞, –¥–∞–≤–∞–π—Ç–µ!', callback_data: `ready_${chatId}` }
                            ]
                        ]
                    }
                };

                await bot.sendMessage(chatId, '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é!\n–ö–∞–∫ –≤—ã —Å–µ–≥–æ–¥–Ω—è? –£–¥–µ–ª–∏—Ç—å —Å–µ–±–µ —Ö–æ—Ç—è –±—ã 10‚Äì20 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥ –∫ –±–æ–ª—å—à–æ–º—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é. –î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ—Ç –¥–µ–Ω—å –Ω–µ–º–Ω–æ–≥–æ –ª–µ–≥—á–µ –∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω–µ–µ. –ü—Ä–∏—Å—Ç—É–ø–∏–º? üíô', options);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:', error);
            }
        });

        reminders.set(chatId, job);
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:', error);
    }
}

// –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
process.on('SIGINT', () => {
    reminders.forEach(job => job.cancel());
    process.exit(0);
});


// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ callback_query
bot.on('callback_query', async (query) => {
    const chatId = query.message.chat.id;
    const data = query.data;

    try {
        if (data.startsWith('not_ready')) {
            await bot.sendMessage(chatId, '–•–æ—Ä–æ—à–æ, –∫–æ–≥–¥–∞ –≤—ã –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã, –¥–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ —Å–¥–µ–ª–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ. –ù–∞–π–¥–∏—Ç–µ –º–æ–º–µ–Ω—Ç, —á—Ç–æ–±—ã —É–¥–µ–ª–∏—Ç—å –≤—Ä–µ–º—è —Å–≤–æ–µ–º—É —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—é ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–∞–∂–Ω–æ.');
            scheduleReminder(chatId); // –ü–ª–∞–Ω–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
        } else if (data.startsWith('ready')) {
            // –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ, –æ—Ç–º–µ–Ω—è–µ–º –µ–≥–æ
            if (reminders.has(chatId)) {
                reminders.get(chatId).cancel();
                reminders.delete(chatId);
            }
            
            await bot.sendMessage(chatId, '–û—Ç–ª–∏—á–Ω–æ! –ü–æ–¥–±–∏—Ä–∞—é –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏...');
            const testResults = {
                test1: await getTestResult(chatId, 'test1'),
                test2: await getTestResult(chatId, 'test2'),
                test3: await getTestResult(chatId, 'test3'),
                test4: await getTestResult(chatId, 'test4')
            };
            const recommendation = await getChatGPTRecommendation(testResults);
            await bot.sendMessage(chatId, recommendation);
        }


        const prevMessageId = await getLastMessageId(chatId);
        if (prevMessageId) {
            await bot.deleteMessage(chatId, prevMessageId).catch(() => {});
        }

        if (data === 'export_database' && isAdmin(chatId)) {
            await exportDatabase(chatId);
            return;
        }

        if (data === 'start_test') {
            const message = await bot.sendMessage(chatId, '–î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è, –Ω–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –§–ò–û (–§–∞–º–∏–ª–∏—è –ò–º—è –û—Ç—á–µ—Å—Ç–≤–æ).');
            await saveResponse(chatId, { 
                stage: 'full_name', 
                username: query.from.username,
                message_id: message.message_id 
            });
        } else if (data === 'male' || data === 'female') {
            const message = await bot.sendMessage(chatId, '–ü—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –ª–∏ –≤—ã –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã?', {
                reply_markup: {
                    inline_keyboard: [
                        [{ text: '–î–∞', callback_data: 'meds_yes' }],
                        [{ text: '–ù–µ—Ç', callback_data: 'meds_no' }]
                    ]
                }
            });
            await saveResponse(chatId, { 
                gender: data, 
                stage: 'taking_meds',
                message_id: message.message_id 
            });
        } else if (data === 'meds_yes') {
            const message = await bot.sendMessage(chatId, '–ö–∞–∫–∏–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ?');
            await saveResponse(chatId, { 
                taking_meds: 'yes',
                stage: 'meds_details',
                message_id: message.message_id 
            });
        } else if (data === 'meds_no') {
            await saveResponse(chatId, { taking_meds: 'no' });
            const userGender = await getUserGender(chatId);
            if (userGender === 'female') {
                const message = await bot.sendMessage(chatId, '–í—ã –±–µ—Ä–µ–º–µ–Ω–Ω—ã?', {
                    reply_markup: {
                        inline_keyboard: [
                            [{ text: '–î–∞', callback_data: 'pregnant_yes' }],
                            [{ text: '–ù–µ—Ç', callback_data: 'pregnant_no' }]
                        ]
                    }
                });
                await saveResponse(chatId, { 
                    stage: 'pregnant',
                    message_id: message.message_id 
                });
            } else {
                await startTest(chatId);
            }
        } else if (data === 'pregnant_yes' || data === 'pregnant_no') {
            await saveResponse(chatId, { pregnant: data === 'pregnant_yes' ? 'yes' : 'no' });
            await startTest(chatId);
        } else if (data === 'start_test_1') {
            await askTestQuestion(chatId, 'test1', 0);
        } else if (data === 'start_test_2') {
            await askTestQuestion(chatId, 'test2', 0);
        } else if (data === 'start_test_3_anxiety') {
            await askTest3Question(chatId, 'anxiety', 0);
        } else if (data === 'start_test_3_depression') {
            await askTest3Question(chatId, 'depression', 0);
        } else if (data === 'start_test_4') {
            await askTest4Question(chatId, 0);
        } else if (data.startsWith('answer_test4_')) {
            const [_, __, questionIndex, optionIndex] = data.split('_');
            await handleTest4Answer(chatId, parseInt(questionIndex), optionIndex);
        } else if (data.startsWith('answer_test3_')) {
            const [_, __, part, questionIndex, optionIndex] = data.split('_');
            await handleTest3Answer(chatId, part, parseInt(questionIndex), optionIndex);
        } else if (data.startsWith('answer_test1_')) {
            const [_, __, questionIndex, value] = data.split('_');
            await handleTest1Answer(chatId, parseInt(questionIndex), value);
        } else if (data.startsWith('answer_test2_')) {
            const [_, __, questionIndex, value] = data.split('_');
            await handleTest2Answer(chatId, parseInt(questionIndex), value);
        }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ callback_query:', error);
            await bot.sendMessage(chatId, '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ /start');
        }
        });

async function sendRelaxationTechniques(chatId, testResults) {
    const recommendation = await getChatGPTRecommendation(testResults);
    await bot.sendMessage(chatId, recommendation);
}


// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
process.on('uncaughtException', (error) => {
    console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞:', error);
});

process.on('unhandledRejection', (error) => {
    console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–∏—Å–∞:', error);
});

// –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
module.exports = bot;
